(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["contract"],{"0125":function(e,t,a){},"0792":function(e,t,a){"use strict";var r=a("c60f"),i=a.n(r);i.a},"091f":function(e,t,a){"use strict";function r(e,t){return e.then(function(e){return[null,e]}).catch(function(e){return t&&Object.assign(e,t),[e,void 0]})}t["a"]=r},"0a01":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Edit",{attrs:{type:e.type,"ad-options":e.options}})},i=[],n=a("6324"),s=a("a32f");function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var l=n["j"].QB,c=n["j"].KD,u=n["j"].KB,d={components:{Edit:s["a"]},data:function(){var e,t,a,r,i,s,d;return{type:n["b"].CONTRACT.value,options:{modeList:[n["e"].CONTRACT.value],sceneList:(e={},o(e,l.value,{15:["100213","100047"]}),o(e,c.value,{30001:["300112"]}),o(e,u.value,{40001:["400001","400003"]}),e),styleList:(r={},o(r,l.value,{15:(t={},o(t,n["c"].ALLPOS,[1001,1002,1003]),o(t,100213,[1008]),t)}),o(r,c.value,{30001:(a={},o(a,n["c"].ALLPOS,[1001,1002,1003]),o(a,300112,[1008]),a)}),o(r,u.value,[1001,1002]),r),startVersion:(d={},o(d,l.value,"9.3.0"),o(d,c.value,{1001:"8.1.0",1002:"8.1.0",1003:"8.1.3"}),o(d,u.value,{1001:(i={},o(i,n["h"].ADR.value,"6.0.26"),o(i,n["h"].IOS.value,"6.0.30"),i),1002:(s={},o(s,n["h"].ADR.value,"6.0.26"),o(s,n["h"].IOS.value,"6.0.30"),s)}),d)}}}},p=d,m=a("6691"),f=Object(m["a"])(p,r,i,!1,null,null,null);t["default"]=f.exports},1180:function(e,t,a){},"2d95":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Edit",{attrs:{type:e.type,"ad-options":e.options}})},i=[],n=a("6324"),s=a("a32f");function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}n["j"].QB;var l=n["j"].KD,c=(n["j"].KB,{components:{Edit:s["a"]},data:function(){return{type:n["b"].SELF_SUPPORT.value,options:{modeList:[n["e"].RANK.value],sceneList:o({},l.value,{30001:n["c"].ALLPOS,30002:n["c"].ALLPOS,30003:n["c"].ALLPOS}),styleList:o({},l.value,{30001:[10065,10184,10185,10285],30002:[10185,10585],30003:[10065]})}}}}),u=c,d=a("6691"),p=Object(d["a"])(u,r,i,!1,null,null,null);t["default"]=p.exports},"2ff0":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"editForm",attrs:{model:e.formData,rules:e.formRules,"label-width":"140px",size:"mini"}},[a("el-card",{staticClass:"component-edit-page"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(e.componentName)+" 配置")])]),a("div",[a("el-form-item",{attrs:{label:"广告ID："}},[a("span",[e._v(e._s(e.id||"保存后自动分配"))])]),a("el-form-item",{attrs:{label:"广告主名称：",prop:"name"}},[a("el-input",{staticClass:"input-max-w",attrs:{placeholder:"仅限20个字以内",disabled:+e.id>0},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"广告主LOGO：",prop:"adLogo"}},[a("ImgUpload",{attrs:{sizelimit:100,widthlimit:80,heightlimit:80,typelimit:"jpg",info:"广告主LOGO：80x80，JPG,＜100KB。"},model:{value:e.formData.adLogo,callback:function(t){e.$set(e.formData,"adLogo",t)},expression:"formData.adLogo"}})],1),a("el-form-item",{attrs:{label:"备注："}},[a("el-input",{staticClass:"textarea-max-w",attrs:{placeholder:"备注，仅内部可见",type:"textarea",autosize:{minRows:3}},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("\n          "+e._s(e.operateText)+"\n        ")]),a("el-button",{on:{click:e.back}},[e._v("\n          返回\n        ")])],1)],1)])],1)},i=[],n=a("591a"),s=a("6324"),o=a("c816"),l=a("2636");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(a,!0).forEach(function(t){d(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var p=s["i"].COMPONENT,m={components:{ImgUpload:l["a"]},props:{type:{type:String,default:s["b"].CONTRACT.value}},data:function(){var e=this;return{componentName:s["f"][this.type][p],listRoute:s["a"][this.type][p].list,formData:{name:"",remark:"",adLogo:""},formRules:{name:[{required:!0,message:"广告主名称必填",trigger:"blur"},{max:20,message:"长度在20个字符内",trigger:"blur"},{required:!0,validator:function(t,a,r){if(e.id)return r();Object(o["d"])([a]).then(function(e){!1===e.data?r():r(new Error("该广告主已创建，请检查"))}).catch(function(e){})},trigger:"blur"}],adLogo:[{required:!0,message:"广告主图片不能为空哦",trigger:"blur"},{validator:function(e,t,a){return a()}}]}}},computed:u({},Object(n["c"])(["name"]),{id:function(){return"undefined"!==typeof this.$route.query.id?this.$route.query.id:""},operateText:function(){return"undefined"!==typeof this.$route.query.id?"编辑":"保存"},session:function(){return{user:this.name}}}),created:function(){this.id&&this.getForm(this.id)},methods:{submitForm:function(){var e=this,t=this.$refs.editForm;t.validate(function(t){if(t){var a={type:+e.type,component_name:e.formData.name,component_logo:e.formData.adLogo.trim(),distribute_type:1};e.formData.remark&&(a.remark=e.formData.remark);var r={base_info:a,session:e.session},i="";e.id?(r.id=e.id,i=Object(o["e"])(r)):i=Object(o["a"])(r),i.then(function(t){0===t.code?(e.$message({type:"success",message:"".concat(e.operateText,"成功！")}),e.$router.push({name:e.listRoute})):e.$message.error(t.msg)}).catch(function(e){})}})},back:function(){this.$router.back()},getForm:function(e){var t=this,a={session:this.session,page_index:"1",page_size:"1",condition:{id:e,status:0,type:+this.type}};Object(o["c"])(a).then(function(e){var a=e.data.component_list[0].base_info;t.formData={name:a.component_name,remark:a.remark?a.remark:"",adLogo:a.component_logo+" "}})}}},f=m,b=(a("7cc9"),a("6691")),h=Object(b["a"])(f,r,i,!1,null,null,null);t["a"]=h.exports},"38bb":function(e,t,a){},"3abe":function(e,t,a){"use strict";var r=a("38bb"),i=a.n(r);i.a},4579:function(e,t,a){"use strict";var r=a("1180"),i=a.n(r);i.a},4950:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("List",{attrs:{type:e.type,"open-plats":e.plats,"scene-list":e.sceneList}})},i=[],n=a("6324"),s=a("d937");function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var l=n["j"].QB,c=n["j"].KD,u=n["j"].KB,d={components:{List:s["a"]},data:function(){var e;return{type:n["b"].CONTRACT.value,plats:[l.value,c.value,u.value],sceneList:(e={},o(e,l.value,{15:["100213","100047"]}),o(e,c.value,{30001:["300112"]}),o(e,u.value,{40001:["400001","400003"]}),e)}}},p=d,m=a("6691"),f=Object(m["a"])(p,r,i,!1,null,null,null);t["default"]=f.exports},"4f3b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("List",{attrs:{type:e.type}})},i=[],n=a("6324"),s=a("f249"),o={components:{List:s["a"]},data:function(){return{type:n["b"].SELF_SUPPORT.value}}},l=o,c=a("6691"),u=Object(c["a"])(l,r,i,!1,null,null,null);t["default"]=u.exports},6324:function(e,t,a){"use strict";var r,i,n,s,o,l,c,u,d,p,m,f;function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"n",function(){return h}),a.d(t,"b",function(){return v}),a.d(t,"i",function(){return _}),a.d(t,"f",function(){return y}),a.d(t,"a",function(){return g}),a.d(t,"g",function(){return w}),a.d(t,"k",function(){return x}),a.d(t,"h",function(){return O}),a.d(t,"j",function(){return D}),a.d(t,"l",function(){return P}),a.d(t,"m",function(){return k}),a.d(t,"c",function(){return S}),a.d(t,"e",function(){return j}),a.d(t,"d",function(){return A});var h=function(e){var t={};return Object.values(e).forEach(function(e){t[e.value]=e.label}),t},v={CONTRACT:{value:"1",label:"合约"},SELF_SUPPORT:{value:"2",label:"自营"}},_={COMPONENT:"component",ADVERT:"advert"},y=(n={},b(n,v.CONTRACT.value,(r={},b(r,_.COMPONENT,"合约计划"),b(r,_.ADVERT,"合约广告"),r)),b(n,v.SELF_SUPPORT.value,(i={},b(i,_.COMPONENT,"自营计划"),b(i,_.ADVERT,"自营广告"),i)),n),g=(l={},b(l,v.CONTRACT.value,(s={},b(s,_.COMPONENT,{list:"contract_plan",edit:"contract_plan_edit"}),b(s,_.ADVERT,{list:"contract_ad",edit:"contract_ad_edit"}),s)),b(l,v.SELF_SUPPORT.value,(o={},b(o,_.COMPONENT,{list:"self-support_plan",edit:"self-support_plan_edit"}),b(o,_.ADVERT,{list:"self-support_ad",edit:"self-support_ad_edit"}),o)),l),w=(d={},b(d,v.CONTRACT.value,(c={},b(c,_.COMPONENT,105),b(c,_.ADVERT,107),c)),b(d,v.SELF_SUPPORT.value,(u={},b(u,_.COMPONENT,108),b(u,_.ADVERT,109),u)),d),x=(p={},b(p,v.CONTRACT.value,"PreviewContractAds"),b(p,v.SELF_SUPPORT.value,"PreviewSelfSupportAds"),p),O={ADR:{value:"1",label:"安卓"},IOS:{value:"2",label:"IOS"}},D={QB:{value:"1",label:"浏览器"},KD:{value:"2",label:"看点"},KB:{value:"3",label:"快报"},BD:{value:"4",label:"波洞"}},P={ALL_EXIST:{value:"0",label:"全部未删除"},ALL:{value:"1",label:"全部"},DELETE:{value:"2",label:"已删除"},EFFECT:{value:"3",label:"启用中"},STOP:{value:"4",label:"停用中"},END:{value:"5",label:"已结束"}},k={DELETE:{value:"10",label:"已删除"},WAIT:{value:"11",label:"待启动"},RUNNIG:{value:"12",label:"启用中"},PAUSE:{value:"13",label:"停用中"},END:{value:"14",label:"已结束"}},S=(m={ALLPOS:"ALL"},b(m,D.KD.value,{30001:{value:"30001",label:"首页feeds",positions:[{value:"300112",label:"首页feeds 1-3"},{value:"300101",label:"首页feeds 1-6"},{value:"300102",label:"首页feeds 2-13"},{value:"300103",label:"首页feeds 3-21"},{value:"300104",label:"首页feeds 31—71"}]},30002:{value:"30002",label:"视频广告",positions:[]},30003:{value:"30003",label:"文章广告",positions:[]}}),b(m,D.QB.value,{15:{value:"15",label:"首页feeds",positions:[{value:"100213",label:"浏览器首页feeds"},{value:"100047",label:"首页feeds 1-6 品牌"}]}}),b(m,D.KB.value,{40001:{value:"40001",label:"快报主feeds",positions:[{value:"400001",label:"主feeds_顶部刷新"},{value:"400003",label:"主feeds_底部刷新"}]}}),m),j={RANK:{value:"1",label:"竞价广告"},CONTRACT:{value:"2",label:"合约广告"},LABEL:{value:"3",label:"标签广告"},GAME:{value:"4",label:"游戏组件广告"}},A=(f={},b(f,D.QB.value,{15:{100213:{1008:[{value:"100801",label:"前后缩放"},{value:"100802",label:"横向位移"}]}}}),b(f,D.KD.value,{30001:{300112:{1008:[{value:"100801",label:"前后缩放"},{value:"100802",label:"横向位移"}]}}}),f)},"7cc9":function(e,t,a){"use strict";var r=a("c2d0"),i=a.n(r);i.a},a32f:function(e,t,a){"use strict";var r,i,n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"editForm",staticClass:"ad-edit-form",attrs:{"label-width":"140px",size:"mini",model:e.formData,rules:e.formRules}},[a("el-card",{staticClass:"ad-edit-page"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("广告基础信息配置")])]),a("div",[a("el-form-item",{attrs:{label:"ID："}},[a("span",[e._v(e._s(e.formData.id))])]),a("el-form-item",{attrs:{label:"平台："}},[a("span",[e._v(e._s(e.PlatNameMap[e.platId]||"--"))])]),a("el-form-item",{attrs:{label:"选择"+e.componentName+"：",prop:"component_id"}},[a("el-select",{staticClass:"select-width",attrs:{filterable:"",remote:"",placeholder:"输入计划名称进行搜索","remote-method":e.planSearchAsync,loading:e.planSearchLoading,disabled:e.formData.id>0},model:{value:e.formData.component_id,callback:function(t){e.$set(e.formData,"component_id",t)},expression:"formData.component_id"}},e._l(e.formOptions.plan_select_options,function(e,t){return a("el-option",{key:t,attrs:{label:"["+t+"] "+e,value:t}})}),1)],1),a("el-form-item",{attrs:{label:e.AdvertName+"名称：",prop:"ad_name"}},[a("el-input",{staticClass:"input-max-w",attrs:{placeholder:"仅限20个字以内"},model:{value:e.formData.ad_name,callback:function(t){e.$set(e.formData,"ad_name",t)},expression:"formData.ad_name"}})],1),a("el-form-item",{attrs:{label:"平台选择：",prop:"os_type"}},[a("el-radio-group",{model:{value:e.formData.os_type,callback:function(t){e.$set(e.formData,"os_type",t)},expression:"formData.os_type"}},[e._l(e.formOptions.os_type,function(t,r){return[a("el-radio",{key:r,attrs:{label:r}},[e._v("\n              "+e._s(t)+"\n            ")])]})],2)],1),a("el-form-item",{attrs:{label:"投放模式：",prop:"delivery_mode"}},[a("el-select",{staticClass:"select-width",attrs:{placeholder:"请选择投放模式："},model:{value:e.formData.delivery_mode,callback:function(t){e.$set(e.formData,"delivery_mode",t)},expression:"formData.delivery_mode"}},e._l(e.modeOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}),1)],1),a("el-form-item",{attrs:{label:"投放场景：",prop:"delivery_scene"}},[a("el-select",{staticClass:"select-width",attrs:{placeholder:"请选择投放场景"},on:{change:function(t){e.formData.material_style=""}},model:{value:e.formData.delivery_scene,callback:function(t){e.$set(e.formData,"delivery_scene",t)},expression:"formData.delivery_scene"}},e._l(e.sceneOptions,function(e,t){return a("el-option",{key:t,attrs:{label:"["+t+"] "+e.label,value:t}})}),1)],1),e.positionOptions?a("el-form-item",{attrs:{label:"投放广告位：",prop:"ad_posid"}},[a("el-select",{staticClass:"select-width",attrs:{placeholder:"请选择投放场景"},model:{value:e.formData.ad_posid,callback:function(t){e.$set(e.formData,"ad_posid",t)},expression:"formData.ad_posid"}},e._l(e.positionOptions,function(e,t){return a("el-option",{key:t,attrs:{label:"["+t+"] "+e,value:t}})}),1)],1):e._e(),a("el-form-item",{attrs:{label:"商品类型：",prop:"distribute_type"}},[a("el-select",{staticClass:"select-width",attrs:{placeholder:"请选择商品类型"},on:{change:e.selectDistributeType},model:{value:e.formData.distribute_type,callback:function(t){e.$set(e.formData,"distribute_type",t)},expression:"formData.distribute_type"}},e._l(e.formOptions.distribute_type,function(e,t){return a("el-option",{key:t,attrs:{label:"["+t+"] "+e,value:t}})}),1)],1),e.formOptions.has_package_type.indexOf(Number(e.formData.distribute_type))>=0?a("div",[String(e.formData.os_type)===e.OS.ADR.value?a("el-form-item",{attrs:{label:"包名：",prop:"material_info.android_package_name"}},[a("el-input",{staticClass:"input-max-w",model:{value:e.formData.material_info.android_package_name,callback:function(t){e.$set(e.formData.material_info,"android_package_name",t)},expression:"formData.material_info.android_package_name"}})],1):e._e(),String(e.formData.os_type)===e.OS.IOS.value?a("el-form-item",{attrs:{label:"apple id：",prop:"material_info.ios_appid"}},[a("el-input",{staticClass:"input-max-w",model:{value:e.formData.material_info.ios_appid,callback:function(t){e.$set(e.formData.material_info,"ios_appid",t)},expression:"formData.material_info.ios_appid"}})],1):e._e()],1):e._e(),e.formOptions.has_product_type.indexOf(Number(e.formData.distribute_type))>=0?a("el-form-item",{attrs:{label:"商品ID：",prop:"material_info.product_id"}},[a("el-input",{staticClass:"input-max-w",model:{value:e.formData.material_info.product_id,callback:function(t){e.$set(e.formData.material_info,"product_id",t)},expression:"formData.material_info.product_id"}})],1):e._e(),e.formOptions.has_spu_type.indexOf(Number(e.formData.distribute_type))>=0?a("el-form-item",{attrs:{label:"SPU ID：",prop:"material_info.spuid"}},[a("el-input",{staticClass:"input-max-w",model:{value:e.formData.material_info.spuid,callback:function(t){e.$set(e.formData.material_info,"spuid",t)},expression:"formData.material_info.spuid"}})],1):e._e()],1)]),a("el-card",{staticClass:"ad-edit-page"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("广告素材信息配置")])]),a("div",[a("el-form-item",{attrs:{label:"投放样式：",prop:"material_style"}},[a("el-select",{staticClass:"select-width",attrs:{placeholder:"请选择投放样式"},on:{change:e.selectMaterialStyle},model:{value:e.formData.material_style,callback:function(t){e.$set(e.formData,"material_style",t)},expression:"formData.material_style"}},e._l(e.styleOptions,function(e,t){return a("el-option",{key:t,attrs:{label:"["+t+"] "+e,value:t}})}),1),e.startVersion?a("span",{staticClass:"app-version-tip"},[e._v("\n          该类型的终端最低版本要求:"+e._s(e.startVersion)+"\n        ")]):e._e()],1),e.effectOptions?a("el-form-item",{attrs:{label:"投放形态：",prop:"delivery_effect"}},[a("el-select",{staticClass:"select-width",attrs:{placeholder:"请选择投放形态："},model:{value:e.formData.delivery_effect,callback:function(t){e.$set(e.formData,"delivery_effect",t)},expression:"formData.delivery_effect"}},e._l(e.effectOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}),1)],1):e._e(),a("el-form-item",{attrs:{prop:"material_info"}},[a("assets-edit",{ref:"assets",attrs:{"material-style":e.formData.material_style,"delivery-effect":e.formData.delivery_effect},model:{value:e.formData.material_info,callback:function(t){e.$set(e.formData,"material_info",t)},expression:"formData.material_info"}})],1)],1)]),a("el-card",{staticClass:"ad-edit-page"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("广告其他信息配置")])]),a("div",[String(e.type)!==e.ADType.CONTRACT.value?a("el-form-item",{attrs:{label:"优先级：",prop:"priority"}},[a("el-select",{staticClass:"input-margin",attrs:{placeholder:"请选择优先级"},model:{value:e.formData.priority,callback:function(t){e.$set(e.formData,"priority",t)},expression:"formData.priority"}},[a("el-option",{attrs:{value:-1,label:"-1"}}),a("el-option",{attrs:{value:0,label:"0"}}),a("el-option",{attrs:{value:1,label:"1"}})],1)],1):e._e(),a("el-form-item",{attrs:{label:"计费模式：",prop:"charge_type"}},[a("el-select",{staticClass:"input-margin",attrs:{placeholder:"请选择计费模式"},model:{value:e.formData.charge_type,callback:function(t){e.$set(e.formData,"charge_type",t)},expression:"formData.charge_type"}},e._l(e.formOptions.charge_type,function(e,t){return a("el-option",{key:t,attrs:{value:t,label:e}})}),1)],1),a("el-form-item",{attrs:{label:"价格填写(元)：",prop:"price"}},[a("el-input-number",{attrs:{precision:2,min:0,step:1},model:{value:e.formData.price,callback:function(t){e.$set(e.formData,"price",t)},expression:"formData.price"}})],1),a("el-form-item",{attrs:{label:"号码包ID：",prop:"package_type"}},[a("el-select",{staticClass:"input-margin",attrs:{placeholder:"请选择号码包类型"},on:{change:function(t){e.formData.package_id="0"===e.formData.package_type?"":e.formData.package_id}},model:{value:e.formData.package_type,callback:function(t){e.$set(e.formData,"package_type",t)},expression:"formData.package_type"}},e._l(e.formOptions.package_type,function(e,t){return a("el-option",{key:t,attrs:{value:t,label:e}})}),1),a("el-input",{staticClass:"input-min-w",attrs:{placeholder:"填写号码包ID,非定向广告则不填"},model:{value:e.formData.package_id,callback:function(t){e.$set(e.formData,"package_id",t)},expression:"formData.package_id"}})],1),a("el-form-item",{attrs:{label:"曝光限额：",prop:"exposure_limit"}},[a("el-input",{staticClass:"input-min-w",attrs:{type:"number",min:0,step:1},model:{value:e.formData.exposure_limit,callback:function(t){e.$set(e.formData,"exposure_limit",t)},expression:"formData.exposure_limit"}}),a("el-tag",{staticStyle:{"margin-left":"20px"}},[e._v("\n          "+e._s(Number(e.formData.exposure_limit).toLocaleString())+"\n        ")]),a("span",{staticClass:"help-text"},[e._v("曝光限额最多支持10亿次")])],1),a("el-form-item",{staticClass:"form-item-container",attrs:{label:"投放起止日期："}},[a("el-form-item",{staticClass:"inline-form-item",attrs:{prop:"start_date"}},[a("el-date-picker",{staticClass:"input-margin",attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择起始日期"},model:{value:e.formData.start_date,callback:function(t){e.$set(e.formData,"start_date",t)},expression:"formData.start_date"}})],1),a("el-form-item",{staticClass:"inline-form-item",attrs:{prop:"end_date"}},[a("el-date-picker",{staticClass:"input-margin",attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择结束日期"},model:{value:e.formData.end_date,callback:function(t){e.$set(e.formData,"end_date",t)},expression:"formData.end_date"}})],1)],1),a("el-form-item",{attrs:{label:"特定时间段投放：",prop:"start_time"}},[a("el-time-picker",{staticClass:"input-margin",attrs:{placeholder:"选择起始时间","picker-options":{start:"00:00",end:"23:59"},format:"HH:mm:ss","value-format":"HH:mm:ss"},model:{value:e.formData.start_time,callback:function(t){e.$set(e.formData,"start_time",t)},expression:"formData.start_time"}}),a("el-time-picker",{staticClass:"input-margin",attrs:{placeholder:"选择结束时间","picker-options":{start:"00:00",end:"23:59"},format:"HH:mm:ss","value-format":"HH:mm:ss"},model:{value:e.formData.end_time,callback:function(t){e.$set(e.formData,"end_time",t)},expression:"formData.end_time"}})],1),String(e.type)===e.ADType.CONTRACT.value?[a("el-form-item",{attrs:{label:"c2s曝光地址："}},[a("el-input",{attrs:{placeholder:"c2s监控地址"},model:{value:e.formData.c2s_exposure_urls,callback:function(t){e.$set(e.formData,"c2s_exposure_urls",t)},expression:"formData.c2s_exposure_urls"}})],1),a("el-form-item",{attrs:{label:"c2s点击地址："}},[a("el-input",{attrs:{placeholder:"c2s监控地址"},model:{value:e.formData.c2s_click_urls,callback:function(t){e.$set(e.formData,"c2s_click_urls",t)},expression:"formData.c2s_click_urls"}})],1)]:e._e(),String(e.type)===e.ADType.SELF_SUPPORT.value?[a("el-form-item",{attrs:{label:"广告标文案："}},[a("el-input",{attrs:{placeholder:"广告标文案"},model:{value:e.formData.ad_identification_text,callback:function(t){e.$set(e.formData,"ad_identification_text",t)},expression:"formData.ad_identification_text"}})],1),a("el-form-item",{attrs:{label:"广告按钮文案：",prop:"ad_btn_text"}},[a("el-input",{attrs:{placeholder:"广告按钮文案"},model:{value:e.formData.ad_btn_text,callback:function(t){e.$set(e.formData,"ad_btn_text",t)},expression:"formData.ad_btn_text"}})],1)]:e._e(),a("el-form-item",{attrs:{label:"备注："}},[a("el-input",{staticClass:"textarea-max-w",attrs:{placeholder:"备注，仅内部可见",type:"textarea",autosize:{minRows:3}},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],2)]),a("el-card",{staticClass:"ad-edit-page"},[a("div",[e.disablePreview?e._e():a("el-form-item",{attrs:{label:"预览：",prop:"previewUids"}},[a("el-select",{staticStyle:{width:"270px"},attrs:{disabled:!!e.previewAdID,multiple:"",filterable:"",placeholder:1===Number(e.platId)?"请选择你的GUID":"请选择你的QQ号"},model:{value:e.formData.previewUids,callback:function(t){e.$set(e.formData,"previewUids",t)},expression:"formData.previewUids"}},e._l(e.previewWhiteList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1),a("el-tooltip",{attrs:{content:"预览后，必须在相应账号上曝光、点击广告后，方能进行保存。"+(1===Number(e.platId)?"在QQ浏览器中输入https://adslog.nfa.qq.com可查询自己的GUID":""),effect:"light"}},[a("i",{staticClass:"el-icon-warning-outline",staticStyle:{"margin-left":"12px","vertical-align":"middle","font-size":"20px"}})])],1),a("el-form-item",[e.disablePreview?e._e():a("el-button",{attrs:{type:"primary",title:e.previewTitle},on:{click:function(t){return e.preview()}}},[e._v("\n          "+e._s(e.canSubmit?"预览完成":"预览")+"\n        ")]),a("el-button",{attrs:{title:e.disablePreview||e.canSubmit?"":"请先预览",disabled:!e.disablePreview&&!e.canSubmit,type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("\n          保存\n        ")]),a("el-button",{on:{click:e.resetForm}},[e._v("\n          重置\n        ")])],1),e.previewAdID&&!e.canSubmit?a("el-form-item",[e._v("\n        已发起预览，请在手机中查看，真实预览成功后才能保存。若预览失败，点击按钮重新预览。该过程可能耗时10秒，请耐心等候。\n      ")]):e._e()],1)])],1)},s=[],o=a("3add"),l=a.n(o),c=a("091f"),u=a("6bf2"),d=a.n(u),p=a("591a"),m=a("7907"),f=a("c816"),b=a("77c1"),h=a("e948"),v=a("9914"),_=a("f3fa"),y=function(e){return function(t){return{}.toString.call(t)==="[object ".concat(e,"]")}},g=Array.isArray||y("Array"),w=y("Object"),x=y("String"),O=(y("Function"),y("Undefined"),a("6324"));function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(a,!0).forEach(function(t){k(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function k(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var S={name:"ad_title",type:"input",label:"广告文案",rules:[{required:!0,message:"这是必填项"},{max:20,message:"文案最多20个字符"}]},j={name:"ad_short_title",type:"input",label:"左下辅助文案",rules:[{max:10,message:"文案最多10个字符"}]},A={name:"ad_url",type:"url",label:"落地页链接",rules:[{required:!0,message:"这是必填项"},{type:"url",message:"请填写一个正确的url链接"}]},T={name:"ad_img1",type:"image",label:"预览图",w:200,h:200,rules:[{required:!0,message:"图片不能空"}]},L={name:"ad_img2",type:"image",label:"预览图",w:200,h:200,rules:[{required:!0,message:"图片不能空"}]},C={name:"ad_img3",type:"image",label:"预览图",w:200,h:200,rules:[{required:!0,message:"图片不能空"}]},I={name:"imax_img",type:"image",label:"IMAX图",w:200,h:200,rules:[{required:!0,message:"图片不能空"}]},N={name:"ad_video_url",type:"url",label:"视频链接",rules:[{required:!0,message:"这是必填项"}]},E={name:"ad_video_url2",type:"url",label:"视频链接",rules:[{required:!0,message:"这是必填项"}]},M={name:"ad_video_time",type:"number",label:"视频时长",rules:[{required:!0,message:"这是必填项"},{type:"number",message:"请填写一个正确的数字"},{validator:function(e,t,a){return t<=0?a("必须大于 0"):a()}}]},q={1001:{label:"IMAX 视频广告",info:"IMAX 视频广告",formItems:(r={},k(r,O["j"].QB.value,[P({},S,{rules:[S.rules[0],{max:30,message:"文案最多30个字符"}]}),P({},A),P({},T,{label:"横版视频预览图",w:1280,h:720,size:100,info:"图片：1280*720 JPG/JPEG/PNG 小于100KB"}),P({},N,{label:"横版预览视频",info:"图片：1280*720 JPG/JPEG/PNG 小于100KB"}),P({},I,{label:"竖版视频预览图",w:720,h:1280,size:100,info:"图片：720*1280 JPG/JPEG/PNG 小于100KB。"}),P({},E,{label:"竖版IMAX视频",info:"图片：1280*720 JPG/JPEG/PNG 小于100KB"}),P({},M,{label:"视频时长(秒)"})]),k(r,O["j"].KD.value,[P({},S,{rules:[S.rules[0],{max:30,message:"文案最多30个字符"}]}),P({},A),P({},T,{label:"横版视频预览图",w:1280,h:720,size:100,info:"图片：1280*720 JPG/JPEG/PNG 小于100KB"}),P({},N,{label:"横版预览视频",info:"图片：1280*720 JPG/JPEG/PNG 小于100KB"}),P({},I,{label:"竖版视频预览图",w:720,h:1280,size:100,info:"图片：720*1280 JPG/JPEG/PNG 小于100KB。"}),P({},E,{label:"竖版IMAX视频",info:"图片：1280*720 JPG/JPEG/PNG 小于100KB"}),P({},M,{label:"视频时长(秒)"})]),k(r,O["j"].KB.value,[P({},S,{rules:[S.rules[0],{max:30,message:"文案最多30个字符"}]}),P({},A),P({},T,{label:"横版视频预览图",w:1280,h:720,size:100,info:"图片：1280*720 JPG/JPEG/PNG 小于100KB"}),P({},N,{label:"横版预览视频",info:"图片：1280*720 JPG/JPEG/PNG 小于100KB",tip:"此处填写腾讯视频的vid"}),P({},I,{label:"竖版视频预览图",w:720,h:1280,size:100,info:"图片：720*1280 JPG/JPEG/PNG 小于100KB。"}),P({},E,{label:"竖版IMAX视频",info:"图片：1280*720 JPG/JPEG/PNG 小于100KB",tip:"此处填写腾讯视频的vid"}),P({},M,{label:"视频时长(秒)"})]),r)},1002:{label:"IMAX 图片广告",info:"IMAX 图片广告",formItems:[P({},S,{rules:[S.rules[0],{max:30,message:"文案最多30个字符"}]}),P({},A),P({},T,{w:1280,h:720,size:100,info:"图片：1280*720 JPG/JPEG/PNG 小于100KB"}),P({},I,{w:720,h:1280,size:100,info:"图片：720*1280 JPG/JPEG/PNG 小于100KB。"})]},1003:{label:"超级背景广告",info:"超级背景广告",formItems:[P({},S,{rules:[S.rules[0],{max:30,message:"文案最多30个字符"}]}),P({},A),P({},T,{name:"imax_img",w:1080,h:1920,size:200,info:"图片：1080*1920 JPG/PNG 小于200KB"})]},1008:{label:"Feeds三图随心互动",info:"Feeds三图随心互动",formItems:(i={},k(i,O["j"].QB.value,{100801:[P({},S,{rules:[S.rules[0],{max:20,message:"文案最多20个字符"}]}),P({},A),P({},T,{label:"背景图",w:702,h:172,size:100,info:"图片：702*172 JPG/PNG 小于100KB"}),P({},L,{label:"前景图",w:288,h:180,size:60,info:"图片：288*180 JPG/PNG 小于60KB"})],100802:[P({},S,{rules:[S.rules[0],{max:20,message:"文案最多20个字符"}]}),P({},A),P({},T,{label:"背景图",w:782,h:172,size:100,info:"图片：782*172 JPG/PNG 小于100KB"}),P({},L,{label:"前景图",w:288,h:172,size:60,info:"图片：288*172 JPG/PNG 小于60KB"})]}),k(i,O["j"].KD.value,{100801:[P({},S,{rules:[S.rules[0],{max:20,message:"文案最多20个字符"}]}),P({},A),P({},T,{label:"背景图",w:702,h:172,size:100,info:"图片：702*172 JPG/PNG 小于100KB"}),P({},L,{label:"前景图",w:288,h:180,size:60,info:"图片：288*180 JPG/PNG 小于60KB"})],100802:[P({},S,{rules:[S.rules[0],{max:20,message:"文案最多20个字符"}]}),P({},A),P({},T,{label:"背景图",w:782,h:172,size:100,info:"图片：782*172 JPG/PNG 小于100KB"}),P({},L,{label:"前景图",w:288,h:172,size:60,info:"图片：288*172 JPG/PNG 小于60KB"})]}),i)},10065:{label:"65（大图）",info:"1000px×560px JPG/JPEG/PNG 小于90KB 广告文案40字以内 左下辅助文字10字以内",formItems:[P({},S,{rules:[S.rules[0],{max:40,message:"文案最多40个字符"}]}),P({},j),P({},A),P({},T,{label:"大图",w:1e3,h:560,size:90,info:"图片：1000px×560px JPG/JPEG/PNG 小于90KB。"})]},10184:{label:"184（小图+字）",info:"240px×180px JPG/JPEG/PNG 小于30KB 广告文案20字以内",formItems:[P({},S),P({},A),P({},T,{label:"小图+字",w:240,h:180,size:30,info:"图片：240px×180px JPG/JPEG/PNG 小于30KB。"})]},10185:{label:"185（横版视频）",info:"视频：1280*720 MP4/AV/MOV 小于50Mb，时长≥5S,≤60S,必须带声音。预览图：1280x720，JPG/JPEG/PNG,＜100k。文案30字以内",formItems:[P({},S,{rules:[S.rules[0],{max:30,message:"文案最多30个字符"}]}),P({},A),P({},T,{label:"预览图",w:1280,h:720,size:100,info:"预览图：1280x720，JPG/JPEG/PNG,＜100KB。"}),P({},N)]},10285:{label:"285（三小图+字）",info:"240px×180px JPG/JPEG/PNG 小于30KB 广告文案20字以内",formItems:[P({},S),P({},A),P({},T,{label:"1：小图+字",w:240,h:180,size:30,info:"图片：240px×180px JPG/JPEG/PNG 小于30KB。"}),P({},L,{label:"2：小图+字",w:240,h:180,size:30,info:"图片：240px×180px JPG/JPEG/PNG 小于30KB。"}),P({},C,{label:"3：小图+字",w:240,h:180,size:30,info:"图片：240px×180px JPG/JPEG/PNG 小于30KB。"})]},10585:{label:"585（竖版视频）",info:"视频：720*1280 MP4/AV/MOV 小于50Mb，时长≥5S,≤60S,必须带声音 预览图：720*1280，JPG/JPEG/PNG,＜100k 文案30字以内",formItems:[P({},S,{rules:[S.rules[0],{max:30,message:"文案最多30个字符"}]}),P({},A),P({},T,{label:"预览图",w:720,h:1280,size:100,info:"预览图：720*1280，JPG/JPEG/PNG,＜100KB。"}),P({},N)]}},G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ad-assets-edit"},e._l(e.styleItems,function(t,r){return a("div",{key:r},[a("el-form-item",{ref:"item"+r,refInFor:!0,attrs:{label:(t.label||t.name)+"：",prop:"material_info."+t.name,rules:t.rules}},["input"===t.type?a("el-input",{staticClass:"input-max-w",attrs:{placeholder:"请填写"+(t.label||t.name)},model:{value:e.value[t.name],callback:function(a){e.$set(e.value,t.name,a)},expression:"value[item.name]"}}):"number"===t.type?a("el-input",{staticClass:"input-max-w",attrs:{type:"number",placeholder:"请填写"+(t.label||t.name)},model:{value:e.value[t.name],callback:function(a){e.$set(e.value,t.name,e._n(a))},expression:"value[item.name]"}}):"url"===t.type?a("el-input",{staticClass:"input-max-w",attrs:{placeholder:"请填写"+(t.label||t.name)},model:{value:e.value[t.name],callback:function(a){e.$set(e.value,t.name,a)},expression:"value[item.name]"}}):"image"===t.type?a("ImgUpload",{ref:"img",refInFor:!0,attrs:{sizelimit:t.size,widthlimit:t.w,heightlimit:t.h,info:t.info},model:{value:e.value[t.name],callback:function(a){e.$set(e.value,t.name,a)},expression:"value[item.name]"}}):a("el-input",{staticClass:"input-max-w",attrs:{placeholder:"请填写"+(t.label||t.name)},model:{value:e.value[t.name],callback:function(a){e.$set(e.value,t.name,a)},expression:"value[item.name]"}}),t.tip?a("div",{staticClass:"form-item-tip"},[e._v(e._s(t.tip))]):e._e()],1)],1)}),0)},$=[],B=a("e064"),R={components:{ImgUpload:B["a"]},props:{deliveryEffect:{type:[String,Number],default:""},materialStyle:{type:[String,Number],default:""},value:{type:Object,default:function(){return{}}}},data:function(){return{platId:+O["j"].KD.value,styleOptions:q}},computed:{styleItems:function(){var e=this.materialStyle;if(!e)return[];var t=this.styleOptions[e];if(t&&t.formItems&&w(t.formItems)){var a=t.formItems[this.platId];if(this.deliveryEffect&&w(a))return a[this.deliveryEffect];if(g(a))return a}return t&&t.formItems&&g(t.formItems)?t.formItems:[]}},created:function(){var e=this.$route.query.plat;this.platId=+e},methods:{clear:function(){var e=this.$refs.img;return!e||(Array.isArray(e)?(e.forEach(function(e){e&&e.clear&&e.clear()}),!0):void(e.clear&&e.clear()))}}},V=R,F=(a("3abe"),a("6691")),U=Object(F["a"])(V,G,$,!1,null,"bc249970",null),J=U.exports;function z(e,t){return Q(e)||Y(e,t)||K()}function K(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function Y(e,t){var a=[],r=!0,i=!1,n=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done);r=!0)if(a.push(s.value),t&&a.length===t)break}catch(l){i=!0,n=l}finally{try{r||null==o["return"]||o["return"]()}finally{if(i)throw n}}return a}function Q(e){if(Array.isArray(e))return e}function H(e,t,a,r,i,n,s){try{var o=e[n](s),l=o.value}catch(c){return void a(c)}o.done?t(l):Promise.resolve(l).then(r,i)}function W(e){return function(){var t=this,a=arguments;return new Promise(function(r,i){var n=e.apply(t,a);function s(e){H(n,r,i,s,o,"next",e)}function o(e){H(n,r,i,s,o,"throw",e)}s(void 0)})}}function X(e){return te(e)||ee(e)||Z()}function Z(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function ee(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function te(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}function ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ae(a,!0).forEach(function(t){ie(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ae(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function ie(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ne=O["i"].ADVERT,se=O["i"].COMPONENT,oe={components:{assetsEdit:J},props:{type:{type:String,default:O["b"].CONTRACT.value},adOptions:{type:Object,default:function(){return{modeList:[],sceneList:{},styleList:{},startVersion:{}}}}},data:function(){var e=this,t=O["f"][this.type][se],a=O["f"][this.type][ne];return{OS:O["h"],ADType:O["b"],componentName:t,AdvertName:a,listRoute:O["a"][this.type][ne].list,platId:O["j"].KD.value,PlatNameMap:Object(O["n"])(O["j"]),tableLoading:!1,isClone:!1,planSearchLoading:!1,formData:this.getInitFormData(),inputTagVisible:!1,inputTagValue:"",formRules:{ad_name:[{required:!0,message:"".concat(a,"名称必填"),trigger:"blur"},{max:20,message:"长度在20个字符内",trigger:"blur"}],component_id:[{required:!0,message:"必须选择一个".concat(t)}],os_type:[{required:!0,message:"阁下必须做出一个合适的选择"}],delivery_mode:[{required:!0,message:"阁下必须做出一个合适的选择"}],delivery_scene:[{required:!0,message:"阁下必须做出一个合适的选择"}],delivery_effect:[{required:!0,message:"阁下必须做出一个合适的选择"}],distribute_type:[{required:!0,message:"阁下必须做出一个合适的选择"},{validator:function(t,a,r){var i=Number(a),n=e.OS,s=Number(e.formData.os_type);return s===Number(n.ADR.value)&&[2,4].indexOf(i)>=0?r("所选商品属性与当前平台不匹配"):s===Number(n.IOS.value)&&[3,5].indexOf(i)>=0?r("所选商品属性与当前平台不匹配"):r()}}],ad_posid:[{required:!0,message:"阁下必须做出一个合适的选择"}],material_style:[{required:!0,message:"阁下必须做出一个合适的选择"}],"material_info.android_package_name":[{validator:function(t,a,r){var i=Number(e.formData.distribute_type),n=e.formOptions.has_package_type;return n.indexOf(i)>=0&&!a?r("请填写正确的包名"):r()}}],"material_info.ios_appid":[{validator:function(t,a,r){var i=Number(e.formData.distribute_type),n=e.formOptions.has_package_type;return n.indexOf(i)>=0&&!a?r("请填写正确的 apple id"):r()}}],priority:[{required:!0,message:"阁下必须做出一个合适的选择"}],exposure_limit:[{validator:function(e,t,a){return""===t?a("曝光限额必填"):t<=0||String(t).indexOf(".")>=0?a("曝光限额必须为整数"):Number.isNaN(Number(t))?a("曝光限额必须为整数"):t>1e9?a("曝光限额最多支持10亿次"):a()}}],price:[{required:!0,message:"必须填写价格"},{validator:function(e,t,a){return t<=0?a("价格必须大于 0"):t>2e3?a("价格不能超过 2000 元"):a()}}],start_date:[{required:!0,message:"阁下必须选一个起始日期"}],end_date:[{required:!0,message:"阁下必须选结束日期"}],package_type:[{validator:function(t,a,r){return e.formData&&e.formData.package_id&&0===+e.formData.package_type?r("填了号码包ID就不管号码包类型了？"):e.formData&&!e.formData.package_id&&+e.formData.package_type>0?r("填了号码包类型就不管号码包ID了？"):r()}},{validator:function(t,a,r){return e.formData&&e.formData.package_id?1===Number(e.formData.package_type)?r(/^\d+$/i.test(e.formData.package_id)?void 0:"此号码包必须为数字~"):void Object(m["a"])(e.formData.package_id).then(function(e){return 0===e.ret&&e.data&&e.data[0]?2!==Number(e.data[0].status)?r("号码包未导入完成，暂不可用，请确认后再使用~"):void r():r("号码包ID无效，请确认后重新输入~")}):r()},trigger:"blur"}],c2s_exposure_urls:[{type:"url",message:"请填写一个正确的url链接"}],c2s_click_urls:[{type:"url",message:"请填写一个正确的url链接"}],ad_btn_text:[{validator:function(e,t,a){var r=t.length;return 0===r?a():r<2||r>4?a("字数限制2-4字"):a()}}],previewUids:[{required:!0,message:"请选择"}]},formOptions:{plan_select_options:{},os_type:Object(O["n"])(O["h"]),distribute_type:{1:"外链",2:"IOS下载",3:"安卓下载",4:"IOS预约",5:"安卓预约",6:"小游戏",7:"商品购买"},btn_text:{1:"查看详情",2:"立即下载",3:"立即下载",4:"立即预约",5:"立即预约",6:"立即启动",7:"查看详情"},has_package_type:[2,3,4,5],has_product_type:[1,6],has_spu_type:[7],package_type:{0:"无",1:"增长平台-guid号码包",2:"ams平台-QQ号码包",3:"ams平台-imei号码包"},charge_type:{1:"CPM"}},canSubmit:!1,previewAdID:null,previewTimer:null}},computed:re({session:function(){return{plat:+this.platId,user:this.name}},startVersion:function(){var e=this.adOptions.startVersion,t=this.formData,a=t.material_style,r=t.os_type;if(!e||0===Object.keys(e).length)return"";var i=e[this.platId];if(!i)return"";if(x(i))return i;var n=i[a];if(!n)return"";if(x(n))return n;var s=n[r];return s&&x(s)?s:""},modeOptions:function(){var e=this.adOptions.modeList,t={},a=Object(O["n"])(O["e"]);return e.forEach(function(e){var r=a[e];r&&(t[e]=r)}),t},styleOptions:function(){var e=this.adOptions.styleList,t=this.formData,a=t.delivery_scene,r=t.ad_posid,i={},n=e[this.platId];if(!n)return i;var s=[];if(w(n)){var o=n[a];if(!o)return i;if(w(o)){var l=o[O["c"].ALLPOS]||[],c=o[r]||[];s=[].concat(X(l),X(c))}g(o)&&(s=o)}return g(n)&&(s=n),s.forEach(function(e){i[e]=q[e]&&q[e].label?q[e].label:""}),i},sceneOptions:function(){var e=this.adOptions.sceneList,t={},a=O["c"][this.platId],r=e[this.platId];return r?(Object.keys(r).forEach(function(e){var i=r[e],n={};n.label=a[e].label,g(i)?n.positions=a[e].positions.filter(function(e){var t=e.value;return i.indexOf(t)>=0}):i===O["c"].ALLPOS&&(n.positions=O["c"].ALLPOS),t[e]=n}),t):t},positionOptions:function(){var e=this.sceneOptions[this.formData.delivery_scene];return e?e.positions===O["c"].ALLPOS?null:g(e.positions)?Object(O["n"])(e.positions):{}:null},effectOptions:function(){var e=O["d"][this.platId];if(!e)return null;var t=this.formData,a=t.delivery_scene,r=t.ad_posid,i=t.material_style,n=e[a];if(!n)return null;var s=n[r];if(!s)return null;var o=s[i];return o?Object(O["n"])(o):null},previewTitle:function(){var e=this.previewAdID,t=this.canSubmit;return e&&!t?"已发起预览，请在手机中查看，真实预览成功后才能保存。若预览失败，点击按钮重新预览。该过程可能耗时10秒，请耐心等候。":""}},Object(p["c"])(["name","previewWhiteList","disablePreview"])),watch:{platId:function(){var e=Object.keys(this.modeOptions)[0];this.formData.delivery_mode=String(e);var t=Object.keys(this.sceneOptions)[0];this.formData.delivery_scene=String(t);var a=Object.keys(this.styleOptions)[0];this.formData.material_style=String(a),a||(this.$message({type:"error",message:"该平台目前暂无可投放的广告样式!"}),this.$router.go(-1))},previewAdID:function(e){var t=this;e&&(this.previewTimer&&clearInterval(this.previewTimer),this.previewTimer=setInterval(function(){var e={ad_id:t.previewAdID};Object(b["b"])(e).then(function(e){var a=e.ret,r=e.data;if(0===a){var i=r.previewed_uids,n=void 0===i?[]:i,s=r.uids,o=void 0===s?[]:s;n.length===o.length&&(clearInterval(t.previewTimer),t.canSubmit=!0)}})},3e3))}},created:function(){this.init()},methods:re({},Object(p["b"])(["getWhiteList"]),{init:function(){var e=W(l.a.mark(function e(){var t,a,r,i,n,s,o,u,d,p,m,f=this;return l.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$route.query,a=t.id,r=t.plat,i=t.clone_id,n=a||i,this.tableLoading=!0,this.platId=+r,this.formData.id=n,this.formData.plat_id=this.platId,i&&(this.formData.id="",this.isClone=!0),e.next=9,Promise.all([this.getWhiteList(this.session),this.planSearchAsync("")]);case 9:if(n){e.next=12;break}return this.tableLoading=!1,e.abrupt("return",!1);case 12:return e.next=14,Object(c["a"])(Object(h["e"])(n,+this.type,this.session));case 14:if(s=e.sent,o=z(s,2),u=o[0],d=o[1],!u){e.next=21;break}return Object(_["a"])(u,"拉取广告信息失败",function(){f.tableLoading=!1}),e.abrupt("return",!1);case 21:return 0===d.code&&d.data&&(p=d.data,p.ads_list&&p.ads_list.length>0?(m=p.ads_list[0],this.setAdInfoData(m)):this.$message.error("拉取广告信息失败")),this.tableLoading=!1,e.abrupt("return",!0);case 24:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),planSearchAsync:function(){var e=W(l.a.mark(function e(t){var a,r,i,n,s,o,u=this;return l.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.planSearchLoading=!0,e.next=3,Object(c["a"])(Object(f["c"])({session:this.session,condition:{type:+this.type,name:t},page_index:1,page_size:999999}));case 3:if(a=e.sent,r=z(a,2),i=r[0],n=r[1],!i){e.next=10;break}return Object(_["a"])(i,"搜索合约计划时发生了错误",function(){u.planSearchLoading=!1}),e.abrupt("return",!1);case 10:n.data&&n.data.component_list?(s=n.data.component_list,o={},s.forEach(function(e){o[e.id]=e.component_name}),this.formOptions.plan_select_options=o):this.$message.error("搜索合约计划时发生了错误"),this.planSearchLoading=!1;case 12:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),submitForm:function(){var e=W(l.a.mark(function e(){var t,a,r,i,n,s,o,u,d,p,m;return l.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["a"])(this.checkForm());case 2:if(t=e.sent,a=z(t,2),a[0],r=a[1],r){e.next=8;break}return e.abrupt("return",this.$message.error("数据校验不通过，请检查是否有漏填"));case 8:if(i=this.getAdInfoData(),!this.formData.id){e.next=19;break}return i.id=this.formData.id,e.next=13,Object(c["a"])(Object(h["g"])(i));case 13:o=e.sent,u=z(o,2),s=u[0],n=u[1],e.next=25;break;case 19:return e.next=21,Object(c["a"])(Object(h["b"])(i));case 21:d=e.sent,p=z(d,2),s=p[0],n=p[1];case 25:if(!s){e.next=27;break}return e.abrupt("return",Object(_["a"])(s,"保存失败，请重试"));case 27:0===n.code?(m=this.formData.id?"编辑广告成功":"创建广告成功",this.$message.success(m),this.$router.push({name:this.listRoute,query:{plat:this.platId}})):this.$message.error(i.msg);case 28:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),checkForm:function(){var e=this;return new Promise(function(t){var a=e.$refs.editForm;a.validate().then(function(){t(!0)},function(){t(!1)})})},setAdInfoData:function(e){var t=this,a=e.base_info,r=re({},this.formData,{},a);r.material_info=re({},this.getInitMaterialInfo(),{},e.material_info),r.material_style="",r.component_id="".concat(a.component_id),r.os_type="".concat(a.os_type),r.delivery_mode="".concat(a.delivery_mode),r.ad_posid="".concat(a.ad_posid),r.delivery_scene="".concat(a.delivery_scene),r.delivery_effect="".concat(a.delivery_effect),r.distribute_type="".concat(a.distribute_type),r.package_type="".concat(a.package_type),r.package_id="".concat(a.package_id),r.priority="".concat(a.priority),r.charge_type="".concat(a.charge_type),r.exposure_limit=a.exposure_limit,r.price=(a.price/100).toFixed(2),r.start_date=d.a.unix(a.start_date).format("YYYY-MM-DD"),r.end_date=d.a.unix(a.end_date).format("YYYY-MM-DD"),r.start_time="".concat(Math.floor(a.start_time/3600),":").concat(Math.floor(a.start_time%3600/60),":").concat(a.start_time%3600%60),r.end_time="".concat(Math.floor(a.end_time/3600),":").concat(Math.floor(a.end_time%3600/60),":").concat(a.end_time%3600%60),this.$set(this,"formData",r),this.$nextTick(function(){t.formData.material_info=r.material_info,t.formData.material_style="".concat(a.material_style)})},getAdInfoData:function(){var e=this.formData,t=e.material_info,a=e.start_time.split(":"),r=e.end_time.split(":"),i=3600*a[0]+60*a[1]+1*a[2],n=3600*r[0]+60*r[1]+1*r[2],s=Object(v["b"])(e),o=Object(v["b"])(t);return delete s.material_info,String(this.type)===O["b"].CONTRACT.value&&(s.priority=s.priority||"5"),s.plat_id=this.platId,s.start_date=d()("".concat(s.start_date," 00:00:00")).unix(),s.end_date=d()("".concat(s.end_date," 23:59:59")).unix(),s.start_time=i,s.end_time=n,s.price=Math.round(100*s.price),o.start_version=this.startVersion,{base_info:s,material_info:o,session:this.session}},getInitFormData:function(){var e={id:"",plat_id:this.platId,component_id:"",ad_name:"",os_type:O["h"].ADR.value,delivery_mode:"",delivery_scene:"",delivery_effect:"",ad_posid:"",material_style:"",exposure_limit:"",package_type:"",package_id:"",start_date:"",end_date:"",start_time:"00:00:00",end_time:"23:59:59",c2s_exposure_urls:"",c2s_click_urls:"",remark:"",charge_type:"1",price:0,ad_identification_text:"",ad_btn_text:"",previewUids:[],material_info:this.getInitMaterialInfo()};return Object(v["b"])(e)},getInitMaterialInfo:function(){return{ad_title:"",ad_short_title:"",ad_url:"",ad_img1:"",imax_img:"",ad_video_url:"",ad_video_url2:"",ad_video_time:"",android_package_name:"",ios_appid:"",product_id:"",spuid:"",start_version:""}},selectDistributeType:function(e){var t=this.formOptions.btn_text[e];this.formData.ad_btn_text=t||""},selectMaterialStyle:function(){this.formData.material_info=this.getInitMaterialInfo(),this.$refs.assets.clear()},resetForm:function(){var e=this;this.$confirm("确认重置吗","提示",{distinguishCancelAndClose:!0,confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(function(){e.formData=e.getInitFormData(),e.formData.price=0}).catch(function(e){})},preview:function(){var e=this,t=this.$refs.editForm;t.validate(function(t){if(t){var a=e.getAdInfoData(),r=a.id,i=a.base_info,n=a.material_info;Object(b["a"])({id:r,base_info:i,material_info:n,session:e.session,uid:e.formData.previewUids.join(";")},O["k"][e.type]).then(function(t){0===t.ret&&(e.$message.success("添加预览任务成功"),e.previewAdID=t.data.data_id)})}})}})},le=oe,ce=(a("4579"),Object(F["a"])(le,n,s,!1,null,null,null));t["a"]=ce.exports},a832:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Edit",{attrs:{type:e.type}})},i=[],n=a("6324"),s=a("2ff0"),o={components:{Edit:s["a"]},data:function(){return{type:n["b"].CONTRACT.value}}},l=o,c=a("6691"),u=Object(c["a"])(l,r,i,!1,null,null,null);t["default"]=u.exports},b00f:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("List",{attrs:{type:e.type}})},i=[],n=a("6324"),s=a("f249"),o={components:{List:s["a"]},data:function(){return{type:n["b"].CONTRACT.value}}},l=o,c=a("6691"),u=Object(c["a"])(l,r,i,!1,null,null,null);t["default"]=u.exports},b64a:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var r=a("fbf0");function i(e){return Object(r["a"])({method:"post",url:"/game_ads_proxy",params:{server:"GAdsAdminLog.GAdsAdminLogProxy",method:"SearchOperate"},data:{params:e}})}},c2d0:function(e,t,a){},c60f:function(e,t,a){},c816:function(e,t,a){"use strict";a.d(t,"d",function(){return i}),a.d(t,"c",function(){return n}),a.d(t,"e",function(){return s}),a.d(t,"a",function(){return o}),a.d(t,"b",function(){return l}),a.d(t,"f",function(){return c});var r=a("fbf0");function i(e){return Object(r["a"])({url:"/game_ads_proxy",method:"post",params:{server:"BAdsPublicManager.BAdsPublicManagerProxy",method:"IsComponentNameExist"},data:{params:e}})}function n(e){return Object(r["a"])({method:"post",url:"/game_ads_proxy",params:{server:"BAdsPublicManager.BAdsPublicManagerProxy",method:"GetComponentList"},data:{params:e}})}function s(e){return Object(r["a"])({url:"/game_ads_proxy",method:"post",params:{server:"BAdsPublicManager.BAdsPublicManagerProxy",method:"ModifyComponent"},data:{params:e}})}function o(e){return Object(r["a"])({url:"/game_ads_proxy",method:"post",params:{server:"BAdsPublicManager.BAdsPublicManagerProxy",method:"CreateComponent"},data:{params:e}})}function l(e){return Object(r["a"])({url:"/game_ads_proxy",params:{server:"BAdsPublicManager.BAdsPublicManagerProxy",method:"DeleteComponent"},data:{params:e},method:"post"})}function c(e){return Object(r["a"])({url:"/game_ads_proxy",params:{server:"GAdsDataShow.GAdsDataShowProxy",method:"QueryBaseData"},data:{params:e},method:"post"})}},d937:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.switchPlat},model:{value:e.plat,callback:function(t){e.plat=t},expression:"plat"}},e._l(e.plats,function(e,t){return a("el-tab-pane",{key:t,attrs:{name:t,label:e}})}),1),a("div",{staticClass:"ad-game-container"},[a("p",{staticClass:"update-time"},[e._v("\n      数据最新更新时间："+e._s(e.latestModifyTime?e.latestModifyTime:"无")+"\n    ")]),a("el-form",{staticClass:"operator-box",attrs:{inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:"广告状态："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.queryStatus,callback:function(t){e.queryStatus=t},expression:"queryStatus"}},e._l(e.statusType,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"投放日期："}},[a("el-date-picker",{staticStyle:{margin:"0 3px"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.queryDate,callback:function(t){e.queryDate=t},expression:"queryDate"}})],1),a("el-form-item",{attrs:{label:"广告主："}},[a("el-select",{attrs:{filterable:"",remote:"",placeholder:"输入广告主名称进行搜索","remote-method":e.componentSearchAsync,loading:e.componentSearchLoading},model:{value:e.queryComponentId,callback:function(t){e.queryComponentId=t},expression:"queryComponentId"}},e._l(e.componentSelect,function(e,t){return a("el-option",{key:t,attrs:{label:0===t?e[1]:"["+e[0]+"] "+e[1],value:e[0]}})}),1)],1),a("el-form-item",{attrs:{label:"广告场景："}},[a("el-select",{attrs:{placeholder:"选择广告场景"},model:{value:e.queryAdScene,callback:function(t){e.queryAdScene=t},expression:"queryAdScene"}},e._l(e.sceneOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}),1)],1),a("el-form-item",{attrs:{label:"名称："}},[a("el-input",{attrs:{placeholder:"名称"},model:{value:e.queryName,callback:function(t){e.queryName=t},expression:"queryName"}})],1),a("el-form-item",{attrs:{label:"ID："}},[a("el-input",{attrs:{placeholder:"ID"},model:{value:e.queryId,callback:function(t){e.queryId=t},expression:"queryId"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.queryTable}},[e._v("\n          查询\n        ")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.create}},[e._v("\n          新建\n        ")])],1)],1),a("el-row",{attrs:{type:"flex",align:"center"}},[a("el-button-group",[a("el-button",{attrs:{size:"small",type:"success"},on:{click:e.batchModifyDate}},[e._v("\n          修改日期\n        ")]),a("el-button",{attrs:{size:"small",type:"success"},on:{click:e.batchModifyTime}},[e._v("\n          修改时间\n        ")]),a("el-button",{attrs:{size:"small",type:"success"},on:{click:e.exportReportForm}},[e._v("\n          导出报表\n        ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"game-ad-table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{fixed:"",type:"selection",width:"30"}}),a("el-table-column",{attrs:{fixed:"",prop:"id",label:"ID",width:"80"}}),a("el-table-column",{attrs:{fixed:"",prop:"statistics_id",label:"统计id",width:"80"}}),a("el-table-column",{attrs:{fixed:"",label:"广告名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[10!==t.row.status?a("router-link",{staticClass:"router-link",attrs:{to:{name:e.editRoute,query:{id:t.row.id,plat:e.plat}}}},[e._v("\n            "+e._s(t.row.adName)+"\n          ")]):e._e(),10===t.row.status?a("span",[e._v(e._s(t.row.adName))]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"adScene",label:"广告场景",width:"120"}}),a("el-table-column",{attrs:{prop:"componentName",label:"广告主名称",width:"120"}}),a("el-table-column",{attrs:{prop:"platform",label:"平台",width:"120"}}),a("el-table-column",{attrs:{prop:"bid",label:"出价",width:"120"}}),a("el-table-column",{attrs:{prop:"exposureUv",label:"曝光UV",width:"120",formatter:e.tableFormatter}}),a("el-table-column",{attrs:{prop:"exposurePv",label:"曝光PV",width:"120",formatter:e.tableFormatter}}),a("el-table-column",{attrs:{prop:"clickUv",label:"点击UV",width:"120",formatter:e.tableFormatter}}),a("el-table-column",{attrs:{prop:"clickPv",label:"点击PV",width:"120",formatter:e.tableFormatter}}),a("el-table-column",{attrs:{prop:"validExposureRate",label:"有效曝光率",width:"120",formatter:e.tableFormatter}}),a("el-table-column",{attrs:{prop:"clickRate",label:"点击率",width:"120",formatter:e.tableFormatter}}),a("el-table-column",{attrs:{prop:"downloadUv",label:"下载UV",width:"120",formatter:e.tableFormatter}}),a("el-table-column",{attrs:{prop:"downloadFinishedUv",label:"下载完成UV",width:"120",formatter:e.tableFormatter}}),a("el-table-column",{attrs:{prop:"reservationUv",label:"预约UV",width:"120",formatter:e.tableFormatter}}),a("el-table-column",{attrs:{prop:"cancleReservationUv",label:"取消预约UV",width:"120",formatter:e.tableFormatter}}),a("el-table-column",{attrs:{prop:"downloadRate",label:"下载率",width:"120",formatter:e.tableFormatter}}),a("el-table-column",{attrs:{prop:"downloadFinishedRate",label:"下载完成率",width:"120",formatter:e.tableFormatter}}),a("el-table-column",{attrs:{prop:"shouldEarn",label:"应收",width:"120",formatter:e.tableFormatter}}),a("el-table-column",{attrs:{prop:"averageBid",label:"平均出价",width:"120",formatter:e.tableFormatter}}),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[10!==t.row.status?a("el-button",{attrs:{type:"text",size:"small"}},[a("router-link",{attrs:{to:{name:e.editRoute,query:{id:t.row.id,plat:e.plat}}}},[e._v("\n              编辑\n            ")])],1):e._e(),12===t.row.status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.stop(t.row,t.$index)}}},[e._v("\n            暂停\n          ")]):e._e(),13===t.row.status?a("el-button",{attrs:{type:"text",size:"small",disabled:new Date(t.row.startTime).getTime()>(new Date).getTime()},on:{click:function(a){return e.start(t.row,t.$index)}}},[e._v("\n            启动\n          ")]):e._e(),10!==t.row.status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.del(t.row,t.$index)}}},[e._v("\n            删除\n          ")]):e._e(),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.clone(t.row)}}},[e._v("\n            克隆\n          ")]),a("el-popover",{attrs:{placement:"right",width:"400",trigger:"click",value:e.previewPopoverVisible[t.row.id]}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"预览："}},[a("el-select",{staticStyle:{width:"270px"},attrs:{multiple:"",filterable:"",placeholder:1===Number(e.plat)?"请选择你的GUID":"请选择你的QQ号"},model:{value:e.previewUids,callback:function(t){e.previewUids=t},expression:"previewUids"}},e._l(e.previewWhiteList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1),1===Number(e.plat)?a("el-tooltip",{attrs:{effect:"light",content:"在QQ浏览器中输入https://adslog.nfa.qq.com可查询自己的GUID"}},[a("i",{staticClass:"el-icon-warning-outline",staticStyle:{"margin-left":"12px","vertical-align":"middle","font-size":"20px"}})]):e._e()],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.preview(t.row)}}},[e._v("确认")])],1)],1),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",type:"text",size:"small"},slot:"reference"},[e._v("预览")])],1)]}}])}),a("el-table-column",{attrs:{label:"转化漏斗",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.showConversion(t.row)}}},[e._v("\n            查看\n          ")])]}}])}),a("el-table-column",{attrs:{prop:"exposureStatus",label:"曝光状态",width:"100"}}),a("el-table-column",{attrs:{prop:"statusName",label:"状态",width:"100"}}),a("el-table-column",{attrs:{label:"修改记录",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.viewOperate(t.row)}}},[e._v("\n            查看\n          ")])]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"200"}})],1),a("el-row",[a("el-col",{attrs:{span:6,offset:18}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-count":e.pagination.totalPage,"page-size":+e.pagination.pageSize,"current-page":+e.pagination.currentPage},on:{"current-change":e.switchTablePage}})],1)],1),a("el-dialog",{attrs:{title:"修改日期",visible:e.modifyDateVisible,width:"25%"},on:{"update:visible":function(t){e.modifyDateVisible=t}}},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.modifyDateVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.requestBatchModifyDate}},[e._v("确 定")])],1)]),a("el-dialog",{attrs:{title:"修改时间",visible:e.modifyTimeVisible,width:"35%"},on:{"update:visible":function(t){e.modifyTimeVisible=t}}},[a("div",{staticClass:"block"},[a("el-radio",{attrs:{label:"0"},on:{change:e.timeOptionChange},model:{value:e.timeOption,callback:function(t){e.timeOption=t},expression:"timeOption"}},[e._v("\n          全时间段\n        ")]),a("el-radio",{attrs:{label:"1"},on:{change:e.timeOptionChange},model:{value:e.timeOption,callback:function(t){e.timeOption=t},expression:"timeOption"}},[e._v("\n          特定时间段\n        ")]),a("el-time-picker",{attrs:{disabled:"0"===e.timeOption,"is-range":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围","value-format":"HH:mm:ss",format:"HH:mm:ss"},model:{value:e.timeRange,callback:function(t){e.timeRange=t},expression:"timeRange"}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.modifyTimeVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.requestBatchModifyTime}},[e._v("确 定")])],1)]),a("el-dialog",{attrs:{title:"转化漏斗",visible:e.conversionVisible,width:"40%"},on:{"update:visible":function(t){e.conversionVisible=t},opened:e.requestConversion}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticStyle:{width:"auto",height:"400px"},attrs:{id:"chart"}})])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.conversionVisible=!1}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"操作记录",visible:e.dialogModifyRecordVisible},on:{"update:visible":function(t){e.dialogModifyRecordVisible=t}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.diffLoading,expression:"diffLoading"}],attrs:{data:e.modifyRecord}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),a("el-table-column",{attrs:{property:"createTime",label:"变更时间",width:"200"}}),a("el-table-column",{attrs:{property:"operator",label:"变更人"}}),a("el-table-column",{attrs:{label:"查看差异"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.checkDiff(t.row)}}},[e._v("\n              查看差异\n            ")])]}}])})],1)],1),a("diff-dialog",{attrs:{visible:e.dialogDiffVisible,data:e.diffData},on:{"update:visible":function(t){e.dialogDiffVisible=t},close:function(t){e.dialogDiffVisible=!1}}})],1)],1)},i=[],n=a("3add"),s=a.n(n),o=a("24cea"),l=a("091f"),c=a("6bf2"),u=a.n(c),d=a("591a"),p=a("4d8c"),m=a("9914"),f=a("f3fa"),b=a("b64a"),h=a("77c1"),v=a("c816"),_=a("e948"),y=a("6324");function g(e,t){return O(e)||x(e,t)||w()}function w(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function x(e,t){var a=[],r=!0,i=!1,n=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done);r=!0)if(a.push(s.value),t&&a.length===t)break}catch(l){i=!0,n=l}finally{try{r||null==o["return"]||o["return"]()}finally{if(i)throw n}}return a}function O(e){if(Array.isArray(e))return e}function D(e,t,a,r,i,n,s){try{var o=e[n](s),l=o.value}catch(c){return void a(c)}o.done?t(l):Promise.resolve(l).then(r,i)}function P(e){return function(){var t=this,a=arguments;return new Promise(function(r,i){var n=e.apply(t,a);function s(e){D(n,r,i,s,o,"next",e)}function o(e){D(n,r,i,s,o,"throw",e)}s(void 0)})}}function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(a,!0).forEach(function(t){j(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function j(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var A=y["i"].ADVERT,T={name:"AdList",components:{diffDialog:p["a"]},props:{type:{type:String,default:y["b"].CONTRACT.value},openPlats:{type:Array,default:function(){return[]}},sceneList:{type:Object,default:function(){return{}}}},data:function(){var e=new Date,t=new Date;return t.setTime(+e-2592e6),e.setTime(+e+2592e6),{editRoute:y["a"][this.type][A].edit,plat:y["j"].KD.value,tableLoading:!1,statusType:[{value:"0",label:"所有未删除"},{value:"1",label:"所有"},{value:"2",label:"已删除"},{value:"3",label:"启用中"},{value:"4",label:"停用中"},{value:"5",label:"已结束"}],platforms:{0:"无效",1:"安卓",2:"ios",3:"全平台"},statusNameMap:{10:"已删除",11:"待启动",12:"投放中",13:"暂停中",14:"已结束"},exposureStatusMap:{0:"未达上限",1:"已达上限"},queryStatus:"0",queryDate:[t,e],queryName:"",queryId:"",queryComponentId:"",tableData:[],latestModifyTime:"",queryAdPosId:"",queryAdScene:"",multipleSelection:[],batchIds:[],modifyDateVisible:!1,modifyTimeVisible:!1,dateRange:"",timeOption:"0",timeRange:"",conversionVisible:!1,conversionChart:void 0,conversionYData:[],conversionData:[],requestRow:void 0,pagination:{totalPage:0,pageSize:"10",currentPage:"1"},dialogModifyRecordVisible:!1,modifyRecord:[],diffLoading:!1,dialogDiffVisible:!1,diffData:void 0,componentSelect:[],componentSearchLoading:!1,componentList:{},previewUids:[],previewPopoverVisible:{}}},computed:S({plats:function(){var e={},t=Object(y["n"])(y["j"]);return this.openPlats.forEach(function(a){e[a]=t[a]||""}),e},session:function(){return{plat:+this.plat,user:this.name}},sceneOptions:function(){var e={0:"全部"},t=y["c"][this.plat],a=this.sceneList[this.plat];return a?(Object.keys(a).forEach(function(a){e[a]=t[a].label}),e):e}},Object(d["c"])(["name","previewWhiteList"])),created:function(){var e=this.$route.query.plat;e&&(this.plat=String(e)),this.queryTable(),this.timeOptionChange("0"),this.getWhiteList(this.session)},methods:S({},Object(d["b"])(["getWhiteList"]),{handleSelectionChange:function(e){this.multipleSelection=e;var t=[],a=!0,r=!1,i=void 0;try{for(var n,s=this.multipleSelection[Symbol.iterator]();!(a=(n=s.next()).done);a=!0){var o=n.value;t.push("".concat(o.id))}}catch(l){r=!0,i=l}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}this.batchIds=t},checkBatch:function(){return!(this.multipleSelection.length<=0)||(this.$message({type:"error",message:"请选择后再进行操作"}),!1)},batchModifyDate:function(){this.checkBatch()&&(this.modifyDateVisible=!0)},batchModifyTime:function(){this.checkBatch()&&(this.modifyTimeVisible=!0)},tableFormatter:function(e,t,a){return a||0},exportReportForm:function(){var e=P(s.a.mark(function e(){var t,a,r,i,n,o,l,c,u,d,p,f,b,h;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=[],a=[],r=[],a=["ID","广告名称","广告场景","广告主名称","平台","出价","请求UV","请求PV","下发UV","下发PV","曝光UV","曝光PV","点击UV","点击PV","有效曝光率","点击率","下载UV","下载完成UV","预约UV","取消预约UV","下载率","下载完成率","应收","平均出价"],t.push(a),e.next=7,this.getComponentList();case 7:return e.next=9,this.requestAdList(1,99999);case 9:if(i=e.sent,n=i.data,0!==n.ads_list.length){e.next=13;break}return e.abrupt("return");case 13:for(o=!0,l=!1,c=void 0,e.prev=16,u=n.ads_list[Symbol.iterator]();!(o=(d=u.next()).done);o=!0)p=d.value,f=p.base_info,t.push([p.id,f.ad_name,this.sceneOptions[f.delivery_scene],this.componentList[f.component_id],this.platforms[f.os_type]?this.platforms[f.os_type]:"无效","".concat(f.price/100),f.package_type>0&&/\S+/i.test(f.package_id)?"是":"否"]),r.push(p.id.toString());e.next=24;break;case 20:e.prev=20,e.t0=e["catch"](16),l=!0,c=e.t0;case 24:e.prev=24,e.prev=25,o||null==u.return||u.return();case 27:if(e.prev=27,!l){e.next=30;break}throw c;case 30:return e.finish(27);case 31:return e.finish(24);case 32:return e.next=34,this.requestBaseData(r);case 34:b=e.sent,h=b.data.data_list,t.forEach(function(e){if(Number(e[0])){var t=h[e[0]]||{};e.push(t.exposure_uv),e.push(t.exposure_pv),e.push(t.click_uv),e.push(t.click_pv),e.push(t.exposure_rate),e.push(t.click_rate),e.push(t.download_uv),e.push(t.finish_download_uv),e.push(t.subscribe_uv),e.push(t.cancel_subscribe_uv),e.push(t.download_rate),e.push(t.download_finish_rate),e.push(t.total_price),e.push(t.average_price)}}),Object(m["c"])(t,"".concat(this.plats[this.plat],"-").concat(this.convertStatus(this.queryStatus),"-广告报表"));case 38:case"end":return e.stop()}},e,this,[[16,20,24,32],[25,,27,31]])}));function t(){return e.apply(this,arguments)}return t}(),convertStatus:function(e){var t=!0,a=!1,r=void 0;try{for(var i,n=this.statusType[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){var s=i.value;if(s.value===e)return s.label}}catch(o){a=!0,r=o}finally{try{t||null==n.return||n.return()}finally{if(a)throw r}}return""},requestBatchModifyDate:function(){var e=this;Array.isArray(this.dateRange)?Object(_["a"])({type:+this.type,ids:this.batchIds,session:this.session,param_type:"0",param:{start_date:"".concat(u()("".concat(this.dateRange[0]," 00:00:00")).unix()),end_date:"".concat(u()("".concat(this.dateRange[1]," 23:59:59")).unix()),start_time:"0",end_time:"0"}}).then(function(t){e.$message({type:"success",message:"修改日期成功!"}),e.modifyDateVisible=!1,e.queryTable()}):this.$message({type:"error",message:"请填写日期再提交!"})},requestBatchModifyTime:function(){var e=this;if(Array.isArray(this.timeRange)){var t=this.timeRange[0].split(":"),a=this.timeRange[1].split(":"),r="".concat(3600*t[0]+60*t[1]+1*t[2]),i="".concat(3600*a[0]+60*a[1]+1*a[2]);Object(_["a"])({type:+this.type,ids:this.batchIds,session:this.session,param_type:"1",param:{start_date:"".concat(u()().unix()),end_date:"".concat(u()().unix()),start_time:r,end_time:i}}).then(function(t){e.$message({type:"success",message:"修改时间成功!"}),e.modifyTimeVisible=!1})}else this.$message({type:"error",message:"请填写日期再提交!"})},switchPlat:function(){this.pagination.currentPage="1",this.getWhiteList(this.session),this.queryTable()},switchTablePage:function(e){this.pagination.currentPage=e,this.queryTable()},queryTable:function(){var e=P(s.a.mark(function e(){var t,a,r,i,n,o,l,c,d,p,m,f,b,h,v,_,y,w,x,O,D,P,k,S,j,A,T,L,C,I,N;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.tableData=[],this.tableLoading=!0,e.next=4,this.getComponentList();case 4:return t=this.pagination,a=t.currentPage,r=t.pageSize,e.next=7,this.requestAdList(a,r);case 7:if(i=e.sent,n=i.data,o=n.ads_list,l=n.total_page,this.pagination.totalPage=l,o&&0!==o.length){e.next=14;break}return this.tableLoading=!1,e.abrupt("return");case 14:for(c=[],d=[],this.tableLoading=!1,p=!0,m=!1,f=void 0,e.prev=20,b=o[Symbol.iterator]();!(p=(h=b.next()).done);p=!0)v=h.value,_=v.base_info,y={adRawData:v,adName:_.ad_name,id:v.id,statistics_id:_.statistics_id,adScene:this.sceneOptions[_.delivery_scene],platform:this.platforms[_.os_type]?this.platforms[_.os_type]:"无效",bid:"".concat(_.price/100),status:v.status,statusName:this.statusNameMap[v.status],exposureStatus:this.exposureStatusMap[_.exposure_status],createTime:u.a.unix(v.create_time).format("YYYY-MM-DD HH:mm"),startTime:1e3*(_.start_date+_.start_time),componentName:this.componentList[_.component_id],isPackage:_.package_type>0&&/\S+/i.test(_.package_id)},c.push(y),d.push(v.id.toString());e.next=28;break;case 24:e.prev=24,e.t0=e["catch"](20),m=!0,f=e.t0;case 28:e.prev=28,e.prev=29,p||null==b.return||b.return();case 31:if(e.prev=31,!m){e.next=34;break}throw f;case 34:return e.finish(31);case 35:return e.finish(28);case 36:return this.tableData=c,e.next=39,this.requestBaseData(d);case 39:for(w=e.sent,x=w.data,O=x.data_list,D=x.latest_modify_time,P=!0,k=!1,S=void 0,e.prev=45,j=this.tableData.entries()[Symbol.iterator]();!(P=(A=j.next()).done);P=!0)T=g(A.value,2),L=T[0],C=T[1],I=O[C.id],I&&(N=C,N.requestUv=I.request_uv,N.requestPv=I.request_pv,N.sendUv=I.give_uv,N.sendPv=I.give_pv,N.exposureUv=I.exposure_uv,N.exposurePv=I.exposure_pv,N.clickUv=I.click_uv,N.clickPv=I.click_pv,N.validExposureRate=I.exposure_rate,N.clickRate=I.click_rate,N.downloadUv=I.download_uv,N.downloadFinishedUv=I.finish_download_uv,N.reservationUv=I.subscribe_uv,N.cancleReservationUv=I.cancel_subscribe_uv,N.downloadRate=I.download_rate,N.downloadFinishedRate=I.download_finish_rate,N.shouldEarn=I.total_price,N.averageBid=I.average_price,this.tableData.splice(L,1,N));e.next=53;break;case 49:e.prev=49,e.t1=e["catch"](45),k=!0,S=e.t1;case 53:e.prev=53,e.prev=54,P||null==j.return||j.return();case 56:if(e.prev=56,!k){e.next=59;break}throw S;case 59:return e.finish(56);case 60:return e.finish(53);case 61:this.latestModifyTime="",D&&(this.latestModifyTime=u.a.unix(D).format("YYYY-MM-DD HH:mm:ss"));case 63:case"end":return e.stop()}},e,this,[[20,24,28,36],[29,,31,35],[45,49,53,61],[54,,56,60]])}));function t(){return e.apply(this,arguments)}return t}(),requestAdList:function(e,t){var a=JSON.parse(JSON.stringify(this.queryDate)),r={type:+this.type,status:+this.queryStatus};return Array.isArray(a)&&(r.start_time=u()(a[0]).startOf("day").unix().toString(),r.end_time=u()(a[1]).endOf("day").unix().toString()),this.queryId&&(r.id=this.queryId),this.queryName&&(r.name=this.queryName),this.queryComponentId&&(r.component_id=this.queryComponentId),this.queryAdScene&&(r.delivery_scene=+this.queryAdScene),Object(_["f"])({session:this.session,page_index:e,page_size:t,condition:r})},requestBaseData:function(e){var t=JSON.parse(JSON.stringify(this.queryDate)),a=0,r=0;return Array.isArray(t)&&(a=u()(t[0]).startOf("day").unix(),r=u()(t[1]).endOf("day").unix()),Object(v["f"])({queryType:2,idList:e,startTime:a,endTime:r,plat:+this.plat,user:this.name})},create:function(){this.$router.push({name:this.editRoute,query:{plat:this.plat}})},clone:function(e){this.$router.push({name:this.editRoute,query:{clone_id:e.id,plat:this.plat}})},stop:function(){var e=P(s.a.mark(function e(t,a){var r,i,n;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["a"])(Object(_["i"])({id:t.id,type:+this.type,session:this.session}));case 2:if(r=e.sent,i=g(r,1),n=i[0],!n){e.next=7;break}return e.abrupt("return",Object(f["a"])(n,"暂停失败，请稍后重试!"));case 7:t.status=13,t.statusName=this.statusNameMap[t.status],this.tableData.splice(a,1,t),this.$message.success("暂停成功!");case 11:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}(),start:function(){var e=P(s.a.mark(function e(t,a){var r,i,n;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["a"])(Object(_["d"])({id:t.id,type:+this.type,session:this.session}));case 2:if(r=e.sent,i=g(r,1),n=i[0],!n){e.next=7;break}return e.abrupt("return",Object(f["a"])(n,"启动失败，请稍后重试!"));case 7:t.status=12,t.statusName=this.statusNameMap[t.status],this.tableData.splice(a,1,t),this.$message.success("启动成功!");case 11:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}(),del:function(){var e=P(s.a.mark(function e(t,a){var r,i,n,o,c,u;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r="确定删除吗?",i={confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",showConfirmButton:!0},[12].includes(t.status)&&(i.showConfirmButton=!1,r="广告正在投放中，请先停止广告"),e.next=5,this.$confirm(r,"提示",i);case 5:if(n=e.sent,n){e.next=8;break}return e.abrupt("return",!1);case 8:return e.next=10,Object(l["a"])(Object(_["c"])({id:t.id,type:+this.type,session:this.session}));case 10:if(o=e.sent,c=g(o,1),u=c[0],!u){e.next=15;break}return e.abrupt("return",Object(f["a"])(u,"删除失败，请稍后重试!"));case 15:this.tableData.splice(a,1),this.$message.success("删除成功!");case 17:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}(),preview:function(e){var t=this;if(0===this.previewUids.length){var a="1"===+this.plat?"请选择你的GUID":"请选择你的QQ号";this.$message.error(a)}else if(this.previewUids.join(";").length>500)this.$message.error("少选几个账号吧");else{var r=e.adRawData,i=r.id,n=r.base_info,s=r.material_info;Object(h["a"])({id:i,base_info:n,material_info:s,session:this.session,uid:this.previewUids.join(";")},y["k"][this.type]).then(function(e){0===e.ret&&t.$message.success("添加预览任务成功")})}},showConversion:function(e){this.requestRow=e,this.conversionVisible=!0},requestConversion:function(){var e=this,t=JSON.parse(JSON.stringify(this.queryDate)),a=0,r=0;Array.isArray(t)&&(a=u()(t[0]).startOf("day").unix(),r=u()(t[1]).endOf("day").unix()),Object(_["h"])({id:this.requestRow.id,plat:+this.plat,user:this.name,startTime:a,endTime:r}).then(function(t){var a=t.data;e.conversionYData=["定向人群","广告活跃人群","广告召回人群","广告粗排人群","广告精排人群","广告下发人群","广告曝光人群","广告点击人群","广告转化人群"],e.conversionData=[parseInt(a.exposure_uv),parseInt(a.recall_uv),parseInt(a.exposure_uv),parseInt(a.rough_uv),parseInt(a.give_uv),parseInt(a.give_uv),parseInt(a.recall_uv),parseInt(a.click_uv),parseInt(a.download_uv)],e.setConversionChart()})},setConversionChart:function(){var e=o["init"](document.getElementById("chart")),t=this.conversionYData,a=this.conversionData;e.setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{show:!1},yAxis:{type:"category",data:t,axisTick:{show:!1}},series:[{type:"bar",data:a,label:{normal:{position:"right",show:!0,color:"black"}},itemStyle:{color:"#B1ECD0"},barWidth:20}],backgroundColor:"#F2F2F2"})},timeOptionChange:function(e){"0"===e&&(this.timeRange=["00:00:00","23:59:59"])},requestOperate:function(e){return Object(b["a"])({plat:+this.plat,moduleId:y["g"][this.type][A],keyId:e})},viewOperate:function(){var e=P(s.a.mark(function e(t){var a;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.diffLoading=!0,t.operate=[],e.next=4,this.requestOperate(t.id);case 4:a=e.sent,0===+a.code&&(a.data=a.data.map(function(e){var t=/^\[\{.*\}\]$/;return t.test(e.rawdata)&&(e.rawdata=e.rawdata.slice(1,-1)),t.test(e.nowdata)&&(e.nowdata=e.nowdata.slice(1,-1)),e}),t.operate=a.data),this.diffLoading=!1,this.modifyRecord=t.operate,this.dialogModifyRecordVisible=!0;case 9:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),checkDiff:function(e){this.dialogDiffVisible=!0,this.diffData=Object(m["g"])(e.rawdata,e.nowdata)},getComponentList:function(){var e=this;if(0===Object.keys(this.componentList).length)return this.reuqestPlanList("").then(function(t){if(t.data&&t.data.component_list){var a={};t.data.component_list.forEach(function(e,t){a[e.id]=e.component_name}),e.componentList=a}})},componentSearchAsync:function(e){var t=this;this.componentSearchLoading=!0,this.reuqestPlanList(e).then(function(e){if(e.data&&e.data.component_list){var a=e.data.component_list,r=[["","全部",{}]];a.forEach(function(e,t){r.push(["".concat(e.id),e.component_name,e.base_info])}),t.componentSelect=r}else t.$notify.error("搜索游戏信息时发生了错误");t.componentSearchLoading=!1}).catch(function(){t.$notify.error("搜索游戏信息时发生了错误"),t.componentSearchLoading=!1})},reuqestPlanList:function(e){return Object(v["c"])({session:this.session,page_index:"1",page_size:"99999",condition:{type:+this.type,name:e}})}})},L=T,C=(a("f074"),a("6691")),I=Object(C["a"])(L,r,i,!1,null,"188b2c42",null);t["a"]=I.exports},e0c8:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("List",{attrs:{type:e.type,"open-plats":e.plats,"scene-list":e.sceneList}})},i=[],n=a("6324"),s=a("d937");function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}n["j"].QB;var l=n["j"].KD,c=(n["j"].KB,{components:{List:s["a"]},data:function(){return{type:n["b"].SELF_SUPPORT.value,plats:[l.value],sceneList:o({},l.value,{30001:n["c"].ALLPOS,30002:n["c"].ALLPOS,30003:n["c"].ALLPOS})}}}),u=c,d=a("6691"),p=Object(d["a"])(u,r,i,!1,null,null,null);t["default"]=p.exports},e595:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Edit",{attrs:{type:e.type}})},i=[],n=a("6324"),s=a("2ff0"),o={components:{Edit:s["a"]},data:function(){return{type:n["b"].SELF_SUPPORT.value}}},l=o,c=a("6691"),u=Object(c["a"])(l,r,i,!1,null,null,null);t["default"]=u.exports},e948:function(e,t,a){"use strict";a.d(t,"h",function(){return o}),a.d(t,"f",function(){return l}),a.d(t,"i",function(){return c}),a.d(t,"d",function(){return u}),a.d(t,"c",function(){return d}),a.d(t,"a",function(){return p}),a.d(t,"e",function(){return m}),a.d(t,"b",function(){return f}),a.d(t,"g",function(){return b});var r=a("fbf0");function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(a,!0).forEach(function(t){s(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e){var t=e.id,a=e.plat,i=e.user,n=e.startTime,s=e.endTime;return Object(r["a"])({method:"post",url:"/game_ads_proxy",params:{server:"GAdsDataShow.GAdsDataShowProxy",method:"QueryFunnelData"},data:{params:{id:t,session:{plat:a,user:i},startTime:n,endTime:s}}})}function l(e){return Object(r["a"])({method:"post",url:"/game_ads_proxy",params:{server:"BAdsPublicManager.BAdsPublicManagerProxy",method:"GetAdvertList"},data:{params:e}})}function c(e){return Object(r["a"])({method:"post",url:"/game_ads_proxy",params:{server:"BAdsPublicManager.BAdsPublicManagerProxy",method:"SuspendAdvert"},data:{params:e}})}function u(e){return Object(r["a"])({method:"post",url:"/game_ads_proxy",params:{server:"BAdsPublicManager.BAdsPublicManagerProxy",method:"EnableAdvert"},data:{params:e}})}function d(e){return Object(r["a"])({method:"post",url:"/game_ads_proxy",params:{server:"BAdsPublicManager.BAdsPublicManagerProxy",method:"DeleteAdvert"},data:{params:e}})}function p(e){return Object(r["a"])({method:"post",url:"/game_ads_proxy",params:{server:"BAdsPublicManager.BAdsPublicManagerProxy",method:"BatchModifyAdvert"},data:{params:e}})}function m(e,t,a){return l({condition:{type:t,id:+e,status:0},session:a,page_index:1,page_size:1})}function f(e){return Object(r["a"])({method:"post",url:"/game_ads_proxy",params:{server:"BAdsPublicManager.BAdsPublicManagerProxy",method:"CreateAdvert"},data:{params:n({base_info:null,material_info:null},e)}})}function b(e){return Object(r["a"])({method:"post",url:"/game_ads_proxy",params:{server:"BAdsPublicManager.BAdsPublicManagerProxy",method:"ModifyAdvert"},data:{params:n({base_info:null,material_info:null},e)}})}},f074:function(e,t,a){"use strict";var r=a("0125"),i=a.n(r);i.a},f249:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("p",{staticClass:"update-time"},[e._v("\n    数据最新更新时间："+e._s(e.latestModifyTime?e.latestModifyTime:"无")+"\n  ")]),a("el-form",{staticClass:"operator-box",attrs:{inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:"状态："}},[a("el-select",{staticStyle:{width:"120px",margin:"0 3px"},attrs:{placeholder:"请选择"},model:{value:e.condition.status,callback:function(t){e.$set(e.condition,"status",t)},expression:"condition.status"}},e._l(e.options.status,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"创建时间："}},[a("el-date-picker",{staticStyle:{margin:"0 3px"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.condition.date,callback:function(t){e.$set(e.condition,"date",t)},expression:"condition.date"}})],1),a("el-form-item",{attrs:{label:"名称："}},[a("el-input",{staticStyle:{width:"150px",margin:"0 3px"},attrs:{placeholder:"名称"},model:{value:e.condition.name,callback:function(t){e.$set(e.condition,"name","string"===typeof t?t.trim():t)},expression:"condition.name"}})],1),a("el-form-item",{attrs:{label:"ID："}},[a("el-input",{staticStyle:{width:"120px",margin:"0 8px 0 3px"},attrs:{placeholder:"ID"},model:{value:e.condition.id,callback:function(t){e.$set(e.condition,"id","string"===typeof t?t.trim():t)},expression:"condition.id"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("\n        查询\n      ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.create}},[e._v("\n        新建\n      ")]),a("el-button",{attrs:{type:"success"},on:{click:e.exportList}},[e._v("\n        导出列表\n      ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"ad-game-table",attrs:{border:"",data:e.list,"header-cell-class-name":function(){return"component-table-header"}}},[a("el-table-column",{attrs:{fixed:"",prop:"id",label:"ID",width:"80"}}),a("el-table-column",{attrs:{fixed:"",label:"广告主名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{staticClass:"router-link",on:{click:function(a){return e.edit(t.row.id)}}},[e._v("\n          "+e._s(t.row.component_name)+"\n        ")])]}}])}),a("el-table-column",{attrs:{prop:"base_data.exposure_uv",label:"曝光UV",width:"120",formatter:e.tableFormatter}}),a("el-table-column",{attrs:{prop:"base_data.exposure_pv",label:"曝光PV",width:"120",formatter:e.tableFormatter}}),a("el-table-column",{attrs:{prop:"base_data.click_uv",label:"点击UV",width:"120",formatter:e.tableFormatter}}),a("el-table-column",{attrs:{prop:"base_data.click_pv",label:"点击PV",width:"120",formatter:e.tableFormatter}}),a("el-table-column",{attrs:{prop:"base_data.click_rate",label:"点击率",width:"120",formatter:e.tableFormatter}}),a("el-table-column",{attrs:{prop:"base_data.download_uv",label:"下载UV",width:"120",formatter:e.tableFormatter}}),a("el-table-column",{attrs:{prop:"base_data.finish_download_uv",label:"下载完成UV",width:"120",formatter:e.tableFormatter}}),a("el-table-column",{attrs:{prop:"base_data.subscribe_uv",label:"预约UV",width:"120",formatter:e.tableFormatter}}),a("el-table-column",{attrs:{prop:"base_data.cancel_subscribe_uv",label:"取消预约UV",width:"120",formatter:e.tableFormatter}}),a("el-table-column",{attrs:{prop:"base_data.download_rate",label:"下载率",width:"120",formatter:e.tableFormatter}}),a("el-table-column",{attrs:{prop:"base_data.download_finish_rate",label:"下载完成率",width:"120",formatter:e.tableFormatter}}),a("el-table-column",{attrs:{prop:"base_data.total_price",label:"应收",width:"120",formatter:e.tableFormatter}}),a("el-table-column",{attrs:{prop:"base_data.average_price",label:"平均出价",width:"120",formatter:e.tableFormatter}}),a("el-table-column",{attrs:{label:"操作",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[10!==t.row.status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.del(t.row)}}},[e._v("\n          删除\n        ")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e.RspStatusMap[t.row.status]))])]}}])}),a("el-table-column",{attrs:{label:"修改记录",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.viewOperate(t.row)}}},[e._v("\n          查看\n        ")])]}}])}),a("el-table-column",{attrs:{label:"创建时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(e.convertTime(t.row.create_time)))])]}}])})],1),a("el-row",[a("el-col",{attrs:{span:6,offset:18}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-count":e.pagination.totalPage,"page-size":+e.pagination.pageSize,"current-page":+e.pagination.currentPage},on:{"current-change":e.switchPage}})],1)],1),a("el-dialog",{attrs:{title:"操作记录",visible:e.dialog.operate.visible},on:{"update:visible":function(t){return e.$set(e.dialog.operate,"visible",t)}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dialog.operate.loading,expression:"dialog.operate.loading"}],attrs:{data:e.tempData.operate}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),a("el-table-column",{attrs:{property:"createTime",label:"变更时间",width:"200"}}),a("el-table-column",{attrs:{property:"operator",label:"变更人"}}),a("el-table-column",{attrs:{label:"查看差异"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.checkDiff(t.row)}}},[e._v("\n            查看差异\n          ")])]}}])})],1)],1),a("diff-dialog",{attrs:{visible:e.dialog.diff.visible,data:e.dialog.diff.data},on:{"update:visible":function(t){return e.$set(e.dialog.diff,"visible",t)},close:function(t){e.dialog.diff.visible=!1}}})],1)},i=[],n=a("3add"),s=a.n(n),o=a("6bf2"),l=a.n(o),c=a("591a"),u=a("4d8c"),d=a("9914"),p=a("b64a"),m=a("c816"),f=a("6324");function b(e,t){return _(e)||v(e,t)||h()}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function v(e,t){var a=[],r=!0,i=!1,n=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done);r=!0)if(a.push(s.value),t&&a.length===t)break}catch(l){i=!0,n=l}finally{try{r||null==o["return"]||o["return"]()}finally{if(i)throw n}}return a}function _(e){if(Array.isArray(e))return e}function y(e,t,a,r,i,n,s){try{var o=e[n](s),l=o.value}catch(c){return void a(c)}o.done?t(l):Promise.resolve(l).then(r,i)}function g(e){return function(){var t=this,a=arguments;return new Promise(function(r,i){var n=e.apply(t,a);function s(e){y(n,r,i,s,o,"next",e)}function o(e){y(n,r,i,s,o,"throw",e)}s(void 0)})}}function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(a,!0).forEach(function(t){O(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function O(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var D=f["i"].COMPONENT,P={components:{diffDialog:u["a"]},props:{type:{type:String,default:f["b"].CONTRACT.value}},data:function(){var e=new Date,t=new Date;return t.setTime(+e-2592e6),e.setTime(+e+2592e6),{componentName:f["f"][this.type][D],editRoute:f["a"][this.type][D].edit,tableLoading:!1,options:{status:Object.values(f["l"])},condition:{status:"0",date:[t,e],name:"",id:""},dialog:{operate:{visible:!1,loading:!1},diff:{visible:!1,loading:!1,data:void 0}},tempData:{},list:[],pagination:{totalPage:0,pageSize:"10",currentPage:"1"},latestModifyTime:""}},computed:x({},Object(c["c"])(["name"]),{session:function(){return{user:this.name}},RspStatusMap:function(){return Object(f["n"])(f["m"])},QueryStatusMap:function(){return Object(f["n"])(f["l"])}}),mounted:function(){this.search()},methods:{convertTime:function(e){return e?l.a.unix(e).format("YYYY-MM-DD HH:mm"):""},del:function(e){var t=this;if(e){var a="确定删除吗?",r={confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",showConfirmButton:!0};[12].includes(e.status)&&(r.showConfirmButton=!1,a="此".concat(this.componentName,"下仍有广告在投放中或还未结束（广告结束时间大于当前时间），暂时不能删除")),this.$confirm(a,"提示",r).then(function(){var a={id:e.id,session:t.session};Object(m["b"])(a).then(function(){t.$message({message:"删除成功",type:"success"});var a=t.list.findIndex(function(t){return t.id===e.id});t.list.splice(a,1)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}else this.$message({message:"删除数据不能为空",type:"error"})},create:function(){this.$router.push({name:this.editRoute,query:{}})},edit:function(e){this.$router.push({name:this.editRoute,query:{id:e}})},exportList:function(){var e=this;this.tableLoading=!0;var t=String(2e9);this.requestGameList(1,t).then(function(t){var a=t.data.component_list;return e.requestBaseData(a.map(function(e){return e.id})).then(function(e){return a=a.map(function(t){return t.base_data=e.data.data_list&&e.data.data_list[t.id]||{},t}),a})}).then(function(t){var a;e.tableLoading=!1;var r=[];document.querySelector(".el-table__fixed").querySelectorAll(".component-table-header div").forEach(function(e){r.push(e.innerHTML)}),r=r.slice(0,-4);try{a=t.reduce(function(e,t){return e.push([t.id,t.component_name,t.base_data.exposure_uv||0,t.base_data.exposure_pv||0,t.base_data.click_uv||0,t.base_data.click_pv||0,t.base_data.click_rate||0,t.base_data.download_uv||0,t.base_data.finish_download_uv||0,t.base_data.subscribe_uv||0,t.base_data.cancel_subscribe_uv||0,t.base_data.download_rate||0,t.base_data.download_finish_rate||0,t.base_data.total_price||0,t.base_data.average_price||0]),e},[r])}catch(o){}var i="".concat(e.QueryStatusMap[e.condition.status],"-").concat(e.componentName,"报表");if(e.condition.date&&0!==e.condition.date.length){var n=l()(e.condition.date[0]).format("YYYY-MM-DD"),s=l()(e.condition.date[1]).format("YYYY-MM-DD");i+="-".concat(n,"_").concat(s)}Object(d["c"])(a,i),e.$message({type:"success",message:"导出成功"})})},checkDiff:function(e){this.dialog.diff.visible=!0,this.dialog.diff.data=Object(d["g"])(e.rawdata,e.nowdata)},requestOperate:function(e){return Object(p["a"])({moduleId:f["g"][this.type][D],keyId:e})},viewOperate:function(){var e=g(s.a.mark(function e(t){var a;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.tempData=t,this.dialog.operate.loading=!0,t.operate=[],e.next=5,this.requestOperate(t.id);case 5:a=e.sent,0===+a.code&&(a.data=a.data.map(function(e){var t=/^\[\{.*\}\]$/;return t.test(e.rawdata)&&(e.rawdata=e.rawdata.slice(1,-1)),t.test(e.nowdata)&&(e.nowdata=e.nowdata.slice(1,-1)),e}),t.operate=a.data),this.dialog.operate.loading=!1,this.dialog.operate.visible=!0;case 9:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),requestBaseData:function(e){var t={queryType:1,idList:e,session:this.session};if(this.condition.date&&0!==this.condition.date.length){var a=this.condition.date.map(function(e){return l()(e).unix()||""}),r=b(a,2);t.startTime=r[0],t.endTime=r[1]}return Object(m["f"])(t)},requestGameList:function(e,t){var a={session:this.session,page_index:String(e),page_size:String(t),condition:{}},r={type:+this.type};return this.condition.id&&(r.id=this.condition.id),this.condition.name&&(r.name=this.condition.name),this.condition.status&&(r.status=this.condition.status),this.condition.date&&this.condition.date.length&&(r.start_time=l()(this.condition.date[0]).startOf("day").unix().toString(),r.end_time=l()(this.condition.date[1]).endOf("day").unix().toString()),0!==Object.keys(r).length&&(a.condition=r),Object(m["c"])(a)},validation:function(){var e=[];return this.condition.id&&(/^\d+$/.test(this.condition.id)||e.push("ID 输入框请输入数字")),e},tableFormatter:function(e,t,a){return a||0},search:function(){var e=this,t=this.validation();if(0===t.length){this.tableLoading=!0;var a=this.pagination,r=a.currentPage,i=a.pageSize;return this.requestGameList(r,i).then(function(t){e.pagination.totalPage=t.data.total_page;var a=t.data.component_list||[];return 0!==a.length?e.requestBaseData(a.map(function(e){return String(e.id)})).then(function(t){return e.latestModifyTime="",t.data.latest_modify_time&&(e.latestModifyTime=l.a.unix(t.data.latest_modify_time).format("YYYY-MM-DD HH:mm:ss")),a=a.map(function(e){return e.base_data=t.data.data_list&&t.data.data_list[e.id]||{},e}),a}):a}).then(function(t){e.list=t,e.tableLoading=!1}).catch(function(){e.tableLoading=!1})}this.$message({type:"error",message:t[0]})},switchPage:function(e){this.pagination.currentPage=e,this.search()}}},k=P,S=(a("0792"),a("6691")),j=Object(S["a"])(k,r,i,!1,null,"76963bd8",null);t["a"]=j.exports},f3fa:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var r=a("20ad");function i(e,t,a){var i=t||e.toString()||"加载数据失败";r["Message"].error(i),a&&a()}}}]);
//# sourceMappingURL=contract.502a47245ca67f583cfa.js.map